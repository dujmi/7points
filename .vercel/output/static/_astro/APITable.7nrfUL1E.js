import{j as _,e as An,c as F,f as In}from"./utils.kpfBKsH7.js";import{r as v,$ as k}from"./index.gUi7oc_g.js";import{B as re,a as Gt,c as Fn,e as On,h as jn,$ as Nt,b as Dn,d as Ln,g as Mn,f as Vn}from"./index.-vcA54y5.js";import{a as ke,c as fe,_ as E,d as q,$ as Ut,i as Gn,e as Nn,f as Ht,n as Un,b as Hn}from"./index.1StHt_d6.js";import"./index.53DUZEGD.js";const zn="modulepreload",Bn=function(n){return"/"+n},_t={},ie=function(e,t,r){let s=Promise.resolve();if(t&&t.length>0){const i=document.getElementsByTagName("link");s=Promise.all(t.map(o=>{if(o=Bn(o),o in _t)return;_t[o]=!0;const a=o.endsWith(".css"),l=a?'[rel="stylesheet"]':"";if(!!r)for(let d=i.length-1;d>=0;d--){const g=i[d];if(g.href===o&&(!a||g.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${l}`))return;const u=document.createElement("link");if(u.rel=a?"stylesheet":zn,a||(u.as="script",u.crossOrigin=""),u.href=o,document.head.appendChild(u),a)return new Promise((d,g)=>{u.addEventListener("load",d),u.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${o}`)))})}))}return s.then(()=>e()).catch(i=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i})},qn=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>ie(()=>Promise.resolve().then(()=>ve),void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)};class st extends Error{constructor(e,t="FunctionsError",r){super(e),this.name=t,this.context=r}}class Jn extends st{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Kn extends st{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Wn extends st{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Xn=function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})};class Yn{constructor(e,{headers:t={},customFetch:r}={}){this.url=e,this.headers=t,this.fetch=qn(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var r;return Xn(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:o}=t;let a={},l;o&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",l=o):typeof o=="string"?(a["Content-Type"]="text/plain",l=o):typeof FormData<"u"&&o instanceof FormData?l=o:(a["Content-Type"]="application/json",l=JSON.stringify(o)));const c=yield this.fetch(`${this.url}/${e}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),s),body:l}).catch(h=>{throw new Jn(h)}),u=c.headers.get("x-relay-error");if(u&&u==="true")throw new Kn(c);if(!c.ok)throw new Wn(c);let d=((r=c.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),g;return d==="application/json"?g=yield c.json():d==="application/octet-stream"?g=yield c.blob():d==="multipart/form-data"?g=yield c.formData():g=yield c.text(),{data:g,error:null}}catch(s){return{data:null,error:s}}})}}var Qn=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},oe=Qn();const Zn=oe.fetch,it=oe.fetch.bind(oe),zt=oe.Headers,er=oe.Request,tr=oe.Response,ve=Object.freeze(Object.defineProperty({__proto__:null,Headers:zt,Request:er,Response:tr,default:it,fetch:Zn},Symbol.toStringTag,{value:"Module"}));class nr{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=it:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}then(e,t){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,a,l;let c=null,u=null,d=null,g=i.status,h=i.statusText;if(i.ok){if(this.method!=="HEAD"){const w=await i.text();w===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=w:u=JSON.parse(w))}const f=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),m=(a=i.headers.get("content-range"))===null||a===void 0?void 0:a.split("/");f&&m&&m.length>1&&(d=parseInt(m[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(c={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,d=null,g=406,h="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{const f=await i.text();try{c=JSON.parse(f),Array.isArray(c)&&i.status===404&&(u=[],c=null,g=200,h="OK")}catch{i.status===404&&f===""?(g=204,h="No Content"):c={message:f}}if(c&&this.isMaybeSingle&&(!((l=c?.details)===null||l===void 0)&&l.includes("0 rows"))&&(c=null,g=200,h="OK"),c&&this.shouldThrowOnError)throw c}return{error:c,data:u,count:d,status:g,statusText:h}});return this.shouldThrowOnError||(s=s.catch(i=>{var o,a,l;return{error:{message:`${(o=i?.name)!==null&&o!==void 0?o:"FetchError"}: ${i?.message}`,details:`${(a=i?.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(l=i?.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),s.then(e,t)}}class rr extends nr{select(e){let t=!1;const r=(e??"*").split("").map(s=>/\s/.test(s)&&!t?"":(s==='"'&&(t=!t),s)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:t=!0,nullsFirst:r,foreignTable:s,referencedTable:i=s}={}){const o=i?`${i}.order`:"order",a=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${a?`${a},`:""}${e}.${t?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:r=t}={}){const s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${e}`),this}range(e,t,{foreignTable:r,referencedTable:s=r}={}){const i=typeof s>"u"?"offset":`${s}.offset`,o=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(o,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:s=!1,wal:i=!1,format:o="text"}={}){var a;const l=[e?"analyze":null,t?"verbose":null,r?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),c=(a=this.headers.Accept)!==null&&a!==void 0?a:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${c}"; options=${l};`,o==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}class te extends rr{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const r=t.map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:r,type:s}={}){let i="";s==="plain"?i="pl":s==="phrase"?i="ph":s==="websearch"&&(i="w");const o=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${i}fts${o}.${t}`),this}match(e){return Object.entries(e).forEach(([t,r])=>{this.url.searchParams.append(t,`eq.${r}`)}),this}not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e,{foreignTable:t,referencedTable:r=t}={}){const s=r?`${r}.or`:"or";return this.url.searchParams.append(s,`(${e})`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}}class sr{constructor(e,{headers:t={},schema:r,fetch:s}){this.url=e,this.headers=t,this.schema=r,this.fetch=s}select(e,{head:t=!1,count:r}={}){const s=t?"HEAD":"GET";let i=!1;const o=(e??"*").split("").map(a=>/\s/.test(a)&&!i?"":(a==='"'&&(i=!i),a)).join("");return this.url.searchParams.set("select",o),r&&(this.headers.Prefer=`count=${r}`),new te({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:t,defaultToNull:r=!0}={}){const s="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),t&&i.push(`count=${t}`),r||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(e)){const o=e.reduce((a,l)=>a.concat(Object.keys(l)),[]);if(o.length>0){const a=[...new Set(o)].map(l=>`"${l}"`);this.url.searchParams.set("columns",a.join(","))}}return new te({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:t,ignoreDuplicates:r=!1,count:s,defaultToNull:i=!0}={}){const o="POST",a=[`resolution=${r?"ignore":"merge"}-duplicates`];if(t!==void 0&&this.url.searchParams.set("on_conflict",t),this.headers.Prefer&&a.push(this.headers.Prefer),s&&a.push(`count=${s}`),i||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(e)){const l=e.reduce((c,u)=>c.concat(Object.keys(u)),[]);if(l.length>0){const c=[...new Set(l)].map(u=>`"${u}"`);this.url.searchParams.set("columns",c.join(","))}}return new te({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:t}={}){const r="PATCH",s=[];return this.headers.Prefer&&s.push(this.headers.Prefer),t&&s.push(`count=${t}`),this.headers.Prefer=s.join(","),new te({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const t="DELETE",r=[];return e&&r.push(`count=${e}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new te({method:t,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}const ir="1.9.0",or={"X-Client-Info":`postgrest-js/${ir}`};class ot{constructor(e,{headers:t={},schema:r,fetch:s}={}){this.url=e,this.headers=Object.assign(Object.assign({},or),t),this.schemaName=r,this.fetch=s}from(e){const t=new URL(`${this.url}/${e}`);return new sr(t,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new ot(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:r=!1,count:s}={}){let i;const o=new URL(`${this.url}/rpc/${e}`);let a;r?(i="HEAD",Object.entries(t).forEach(([c,u])=>{o.searchParams.append(c,`${u}`)})):(i="POST",a=t);const l=Object.assign({},this.headers);return s&&(l.Prefer=`count=${s}`),new te({method:i,url:o,headers:l,schema:this.schemaName,body:a,fetch:this.fetch,allowEmpty:!1})}}const ar="2.9.1",lr={"X-Client-Info":`realtime-js/${ar}`},ur="1.0.0",Bt=1e4,cr=1e3;var se;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(se||(se={}));var A;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(A||(A={}));var D;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(D||(D={}));var qe;(function(n){n.websocket="websocket"})(qe||(qe={}));var K;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(K||(K={}));class qt{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}class dr{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,t,r)}_decodeBroadcast(e,t,r){const s=t.getUint8(1),i=t.getUint8(2);let o=this.HEADER_LENGTH+2;const a=r.decode(e.slice(o,o+s));o=o+s;const l=r.decode(e.slice(o,o+i));o=o+i;const c=JSON.parse(r.decode(e.slice(o,e.byteLength)));return{ref:null,topic:a,event:l,payload:c}}}class Fe{constructor(e,t,r={},s=Bt){this.channel=e,this.event=t,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var wt;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(wt||(wt={}));class he{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=t?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=he.syncState(this.state,s,i,o),this.pendingDiffs.forEach(l=>{this.state=he.syncDiff(this.state,l,i,o)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=he.syncDiff(this.state,s,i,o),a())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,s){const i=this.cloneDeep(e),o=this.transformState(t),a={},l={};return this.map(i,(c,u)=>{o[c]||(l[c]=u)}),this.map(o,(c,u)=>{const d=i[c];if(d){const g=u.map(m=>m.presence_ref),h=d.map(m=>m.presence_ref),p=u.filter(m=>h.indexOf(m.presence_ref)<0),f=d.filter(m=>g.indexOf(m.presence_ref)<0);p.length>0&&(a[c]=p),f.length>0&&(l[c]=f)}else a[c]=u}),this.syncDiff(i,{joins:a,leaves:l},r,s)}static syncDiff(e,t,r,s){const{joins:i,leaves:o}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(i,(a,l)=>{var c;const u=(c=e[a])!==null&&c!==void 0?c:[];if(e[a]=this.cloneDeep(l),u.length>0){const d=e[a].map(h=>h.presence_ref),g=u.filter(h=>d.indexOf(h.presence_ref)<0);e[a].unshift(...g)}r(a,u,l)}),this.map(o,(a,l)=>{let c=e[a];if(!c)return;const u=l.map(d=>d.presence_ref);c=c.filter(d=>u.indexOf(d.presence_ref)<0),e[a]=c,s(a,c,l),c.length===0&&delete e[a]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,r)=>{const s=e[r];return"metas"in s?t[r]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):t[r]=s,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var x;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(x||(x={}));const yt=(n,e,t={})=>{var r;const s=(r=t.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((i,o)=>(i[o]=hr(o,n,e,s),i),{})},hr=(n,e,t,r)=>{const s=e.find(a=>a.name===n),i=s?.type,o=t[n];return i&&!r.includes(i)?Jt(i,o):Je(o)},Jt=(n,e)=>{if(n.charAt(0)==="_"){const t=n.slice(1,n.length);return mr(e,t)}switch(n){case x.bool:return gr(e);case x.float4:case x.float8:case x.int2:case x.int4:case x.int8:case x.numeric:case x.oid:return fr(e);case x.json:case x.jsonb:return pr(e);case x.timestamp:return vr(e);case x.abstime:case x.date:case x.daterange:case x.int4range:case x.int8range:case x.money:case x.reltime:case x.text:case x.time:case x.timestamptz:case x.timetz:case x.tsrange:case x.tstzrange:return Je(e);default:return Je(e)}},Je=n=>n,gr=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},fr=n=>{if(typeof n=="string"){const e=parseFloat(n);if(!Number.isNaN(e))return e}return n},pr=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(e){return console.log(`JSON parse error: ${e}`),n}return n},mr=(n,e)=>{if(typeof n!="string")return n;const t=n.length-1,r=n[t];if(n[0]==="{"&&r==="}"){let i;const o=n.slice(1,t);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(a=>Jt(e,a))}return n},vr=n=>typeof n=="string"?n.replace(" ","T"):n;var bt;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(bt||(bt={}));var St;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes"})(St||(St={}));var $t;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})($t||($t={}));class at{constructor(e,t={config:{}},r){this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=A.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""}},t.config),this.timeout=this.socket.timeout,this.joinPush=new Fe(this,D.join,this.params,this.timeout),this.rejoinTimer=new qt(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=A.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=A.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=A.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=A.errored,this.rejoinTimer.scheduleTimeout())}),this._on(D.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new he(this),this.broadcastEndpointURL=this._broadcastEndpointURL()}subscribe(e,t=this.timeout){var r,s;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:i,presence:o}}=this.params;this._onError(c=>e&&e("CHANNEL_ERROR",c)),this._onClose(()=>e&&e("CLOSED"));const a={},l={broadcast:i,presence:o,postgres_changes:(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(c=>c.filter))!==null&&s!==void 0?s:[]};this.socket.accessToken&&(a.access_token=this.socket.accessToken),this.updateJoinPayload(Object.assign({config:l},a)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",({postgres_changes:c})=>{var u;if(this.socket.accessToken&&this.socket.setAuth(this.socket.accessToken),c===void 0){e&&e("SUBSCRIBED");return}else{const d=this.bindings.postgres_changes,g=(u=d?.length)!==null&&u!==void 0?u:0,h=[];for(let p=0;p<g;p++){const f=d[p],{filter:{event:m,schema:w,table:R,filter:C}}=f,S=c&&c[p];if(S&&S.event===m&&S.schema===w&&S.table===R&&S.filter===C)h.push(Object.assign(Object.assign({},f),{id:S.id}));else{this.unsubscribe(),e&&e("CHANNEL_ERROR",new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=h,e&&e("SUBSCRIBED");return}}).receive("error",c=>{e&&e("CHANNEL_ERROR",new Error(JSON.stringify(Object.values(c).join(", ")||"error")))}).receive("timeout",()=>{e&&e("TIMED_OUT")})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,r){return this._on(e,t,r)}async send(e,t={}){var r,s;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:o}=e,a={method:"POST",headers:{apikey:(r=this.socket.accessToken)!==null&&r!==void 0?r:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o}]})};try{return(await this._fetchWithTimeout(this.broadcastEndpointURL,a,(s=t.timeout)!==null&&s!==void 0?s:this.timeout)).ok?"ok":"error"}catch(l){return l.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,a,l;const c=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&i("ok"),c.receive("ok",()=>i("ok")),c.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=A.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(D.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(r=>{const s=new Fe(this,D.leave,{},e);s.receive("ok",()=>{t(),r("ok")}).receive("timeout",()=>{t(),r("timed out")}).receive("error",()=>{r("error")}),s.send(),this._canPush()||s.trigger("ok",{})})}_broadcastEndpointURL(){let e=this.socket.endPoint;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"}async _fetchWithTimeout(e,t,r){const s=new AbortController,i=setTimeout(()=>s.abort(),r),o=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:s.signal}));return clearTimeout(i),o}_push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Fe(this,e,t,r);return this._canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var s,i;const o=e.toLocaleLowerCase(),{close:a,error:l,leave:c,join:u}=D;if(r&&[a,l,c,u].indexOf(o)>=0&&r!==this._joinRef())return;let g=this._onMessage(o,t,r);if(t&&!g)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(h=>{var p,f,m;return((p=h.filter)===null||p===void 0?void 0:p.event)==="*"||((m=(f=h.filter)===null||f===void 0?void 0:f.event)===null||m===void 0?void 0:m.toLocaleLowerCase())===o}).map(h=>h.callback(g,r)):(i=this.bindings[o])===null||i===void 0||i.filter(h=>{var p,f,m,w,R,C;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in h){const S=h.id,P=(p=h.filter)===null||p===void 0?void 0:p.event;return S&&((f=t.ids)===null||f===void 0?void 0:f.includes(S))&&(P==="*"||P?.toLocaleLowerCase()===((m=t.data)===null||m===void 0?void 0:m.type.toLocaleLowerCase()))}else{const S=(R=(w=h?.filter)===null||w===void 0?void 0:w.event)===null||R===void 0?void 0:R.toLocaleLowerCase();return S==="*"||S===((C=t?.event)===null||C===void 0?void 0:C.toLocaleLowerCase())}else return h.type.toLocaleLowerCase()===o}).map(h=>{if(typeof g=="object"&&"ids"in g){const p=g.data,{schema:f,table:m,commit_timestamp:w,type:R,errors:C}=p;g=Object.assign(Object.assign({},{schema:f,table:m,commit_timestamp:w,eventType:R,new:{},old:{},errors:C}),this._getPayloadRecords(p))}h.callback(g,r)})}_isClosed(){return this.state===A.closed}_isJoined(){return this.state===A.joined}_isJoining(){return this.state===A.joining}_isLeaving(){return this.state===A.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){const s=e.toLocaleLowerCase(),i={type:s,filter:t,callback:r};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(e,t){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&at.isEqual(s.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(D.close,{},e)}_onError(e){this._on(D.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=A.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=yt(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=yt(e.columns,e.old_record)),t}}const _r=()=>{},wr=typeof WebSocket<"u";class yr{constructor(e,t){var r;this.accessToken=null,this.channels=[],this.endPoint="",this.headers=lr,this.params={},this.timeout=Bt,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=_r,this.conn=null,this.sendBuffer=[],this.serializer=new dr,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this._resolveFetch=i=>{let o;return i?o=i:typeof fetch>"u"?o=(...a)=>ie(()=>Promise.resolve().then(()=>ve),void 0).then(({default:l})=>l(...a)):o=fetch,(...a)=>o(...a)},this.endPoint=`${e}/${qe.websocket}`,t?.transport?this.transport=t.transport:this.transport=null,t?.params&&(this.params=t.params),t?.headers&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),t?.timeout&&(this.timeout=t.timeout),t?.logger&&(this.logger=t.logger),t?.heartbeatIntervalMs&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const s=(r=t?.params)===null||r===void 0?void 0:r.apikey;s&&(this.accessToken=s),this.reconnectAfterMs=t?.reconnectAfterMs?t.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=t?.encode?t.encode:(i,o)=>o(JSON.stringify(i)),this.decode=t?.decode?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new qt(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(t?.fetch)}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this._endPointURL(),void 0,{headers:this.headers});return}if(wr){this.conn=new WebSocket(this._endPointURL()),this.setupConnection();return}this.conn=new br(this._endPointURL(),void 0,{close:()=>{this.conn=null}}),ie(()=>import("./browser.teEx77EO.js").then(e=>e.b),__vite__mapDeps([0,1])).then(({default:e})=>{this.conn=new e(this._endPointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,t??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.disconnect(),e}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case se.connecting:return K.Connecting;case se.open:return K.Open;case se.closing:return K.Closing;default:return K.Closed}}isConnected(){return this.connectionState()===K.Open}channel(e,t={config:{}}){const r=new at(`realtime:${e}`,t,this);return this.channels.push(r),r}push(e){const{topic:t,event:r,payload:s,ref:i}=e,o=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${t} ${r} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}setAuth(e){this.accessToken=e,this.channels.forEach(t=>{e&&t.updateJoinPayload({access_token:e}),t.joinedOnce&&t._isJoined()&&t._push(D.access_token,{access_token:e})})}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_endPointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:ur}))}_onConnMessage(e){this.decode(e.data,t=>{let{topic:r,event:s,payload:i,ref:o}=t;(o&&o===this.pendingHeartbeatRef||s===i?.type)&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${r} ${s} ${o&&"("+o+")"||""}`,i),this.channels.filter(a=>a._isMember(r)).forEach(a=>a._trigger(s,i,o)),this.stateChangeCallbacks.message.forEach(a=>a(t))})}_onConnOpen(){this.log("transport",`connected to ${this._endPointURL()}`),this._flushSendBuffer(),this.reconnectTimer.reset(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this._sendHeartbeat(),this.heartbeatIntervalMs),this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(D.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const r=e.match(/\?/)?"&":"?",s=new URLSearchParams(t);return`${e}${r}${s}`}_flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(cr,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth(this.accessToken)}}}class br{constructor(e,t,r){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=se.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=r.close}}class lt extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function T(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}class Sr extends lt{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Ct extends lt{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var $r=function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})};const Kt=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>ie(()=>Promise.resolve().then(()=>ve),void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},Cr=()=>$r(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield ie(()=>Promise.resolve().then(()=>ve),void 0)).Response:Response});var ae=function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})};const Oe=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),Rr=(n,e)=>ae(void 0,void 0,void 0,function*(){const t=yield Cr();n instanceof t?n.json().then(r=>{e(new Sr(Oe(r),n.status||500))}).catch(r=>{e(new Ct(Oe(r),r))}):e(new Ct(Oe(n),n))}),xr=(n,e,t,r)=>{const s={method:n,headers:e?.headers||{}};return n==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json"},e?.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),t))};function Pe(n,e,t,r,s,i){return ae(this,void 0,void 0,function*(){return new Promise((o,a)=>{n(t,xr(e,r,s,i)).then(l=>{if(!l.ok)throw l;return r?.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>Rr(l,a))})})}function Ke(n,e,t,r){return ae(this,void 0,void 0,function*(){return Pe(n,"GET",e,t,r)})}function V(n,e,t,r,s){return ae(this,void 0,void 0,function*(){return Pe(n,"POST",e,r,s,t)})}function kr(n,e,t,r,s){return ae(this,void 0,void 0,function*(){return Pe(n,"PUT",e,r,s,t)})}function Wt(n,e,t,r,s){return ae(this,void 0,void 0,function*(){return Pe(n,"DELETE",e,r,s,t)})}var O=function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})};const Pr={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Rt={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Er{constructor(e,t={},r,s){this.url=e,this.headers=t,this.bucketId=r,this.fetch=Kt(s)}uploadOrUpdate(e,t,r,s){return O(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},Rt),s),a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",o.cacheControl)):(i=r,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType);const l=this._removeEmptyFolders(t),c=this._getFinalPath(l),u=yield this.fetch(`${this.url}/object/${c}`,Object.assign({method:e,body:i,headers:a},o?.duplex?{duplex:o.duplex}:{})),d=yield u.json();return u.ok?{data:{path:l,id:d.Id,fullPath:d.Key},error:null}:{data:null,error:d}}catch(i){if(T(i))return{data:null,error:i};throw i}})}upload(e,t,r){return O(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,r)})}uploadToSignedUrl(e,t,r,s){return O(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),o=this._getFinalPath(i),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",t);try{let l;const c=Object.assign({upsert:Rt.upsert},s),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",c.cacheControl)):(l=r,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType);const d=yield this.fetch(a.toString(),{method:"PUT",body:l,headers:u}),g=yield d.json();return d.ok?{data:{path:i,fullPath:g.Key},error:null}:{data:null,error:g}}catch(l){if(T(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e){return O(this,void 0,void 0,function*(){try{let t=this._getFinalPath(e);const r=yield V(this.fetch,`${this.url}/object/upload/sign/${t}`,{},{headers:this.headers}),s=new URL(this.url+r.url),i=s.searchParams.get("token");if(!i)throw new lt("No token returned by API");return{data:{signedUrl:s.toString(),path:e,token:i},error:null}}catch(t){if(T(t))return{data:null,error:t};throw t}})}update(e,t,r){return O(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,r)})}move(e,t){return O(this,void 0,void 0,function*(){try{return{data:yield V(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t},{headers:this.headers}),error:null}}catch(r){if(T(r))return{data:null,error:r};throw r}})}copy(e,t){return O(this,void 0,void 0,function*(){try{return{data:{path:(yield V(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t},{headers:this.headers})).Key},error:null}}catch(r){if(T(r))return{data:null,error:r};throw r}})}createSignedUrl(e,t,r){return O(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),i=yield V(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:t},r?.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r?.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(T(s))return{data:null,error:s};throw s}})}createSignedUrls(e,t,r){return O(this,void 0,void 0,function*(){try{const s=yield V(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),i=r?.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(T(s))return{data:null,error:s};throw s}})}download(e,t){return O(this,void 0,void 0,function*(){const s=typeof t?.transform<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString(t?.transform||{}),o=i?`?${i}`:"";try{const a=this._getFinalPath(e);return{data:yield(yield Ke(this.fetch,`${this.url}/${s}/${a}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(T(a))return{data:null,error:a};throw a}})}getPublicUrl(e,t){const r=this._getFinalPath(e),s=[],i=t?.download?`download=${t.download===!0?"":t.download}`:"";i!==""&&s.push(i);const a=typeof t?.transform<"u"?"render/image":"object",l=this.transformOptsToQueryString(t?.transform||{});l!==""&&s.push(l);let c=s.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${c}`)}}}remove(e){return O(this,void 0,void 0,function*(){try{return{data:yield Wt(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(T(t))return{data:null,error:t};throw t}})}list(e,t,r){return O(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},Pr),t),{prefix:e||""});return{data:yield V(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(T(s))return{data:null,error:s};throw s}})}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const Tr="2.5.5",Ar={"X-Client-Info":`storage-js/${Tr}`};var X=function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})};class Ir{constructor(e,t={},r){this.url=e,this.headers=Object.assign(Object.assign({},Ar),t),this.fetch=Kt(r)}listBuckets(){return X(this,void 0,void 0,function*(){try{return{data:yield Ke(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(T(e))return{data:null,error:e};throw e}})}getBucket(e){return X(this,void 0,void 0,function*(){try{return{data:yield Ke(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(T(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return X(this,void 0,void 0,function*(){try{return{data:yield V(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(T(r))return{data:null,error:r};throw r}})}updateBucket(e,t){return X(this,void 0,void 0,function*(){try{return{data:yield kr(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(T(r))return{data:null,error:r};throw r}})}emptyBucket(e){return X(this,void 0,void 0,function*(){try{return{data:yield V(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(T(t))return{data:null,error:t};throw t}})}deleteBucket(e){return X(this,void 0,void 0,function*(){try{return{data:yield Wt(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(T(t))return{data:null,error:t};throw t}})}}class Fr extends Ir{constructor(e,t={},r){super(e,t,r)}from(e){return new Er(this.url,this.headers,e,this.fetch)}}const Or="2.39.1";let ce="";typeof Deno<"u"?ce="deno":typeof document<"u"?ce="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ce="react-native":ce="node";const jr={"X-Client-Info":`supabase-js-${ce}/${Or}`};var Dr=function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})};const Lr=n=>{let e;return n?e=n:typeof fetch>"u"?e=it:e=fetch,(...t)=>e(...t)},Mr=()=>typeof Headers>"u"?zt:Headers,Vr=(n,e,t)=>{const r=Lr(t),s=Mr();return(i,o)=>Dr(void 0,void 0,void 0,function*(){var a;const l=(a=yield e())!==null&&a!==void 0?a:n;let c=new s(o?.headers);return c.has("apikey")||c.set("apikey",n),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),r(i,Object.assign(Object.assign({},o),{headers:c}))})};function Gr(n){return n.replace(/\/$/,"")}function Nr(n,e){const{db:t,auth:r,realtime:s,global:i}=n,{db:o,auth:a,realtime:l,global:c}=e;return{db:Object.assign(Object.assign({},o),t),auth:Object.assign(Object.assign({},a),r),realtime:Object.assign(Object.assign({},l),s),global:Object.assign(Object.assign({},c),i)}}function Ur(n){return Math.round(Date.now()/1e3)+n}function Hr(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){const e=Math.random()*16|0;return(n=="x"?e:e&3|8).toString(16)})}const j=()=>typeof document<"u",z={tested:!1,writable:!1},ge=()=>{if(!j())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(z.tested)return z.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),z.tested=!0,z.writable=!0}catch{z.tested=!0,z.writable=!1}return z.writable};function je(n){const e={},t=new URL(n);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((s,i)=>{e[i]=s})}catch{}return t.searchParams.forEach((r,s)=>{e[s]=r}),e}const Xt=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>ie(()=>Promise.resolve().then(()=>ve),void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},zr=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",B=async(n,e,t)=>{await n.setItem(e,JSON.stringify(t))},we=async(n,e)=>{const t=await n.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},De=async(n,e)=>{await n.removeItem(e)};function Br(n){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let t="",r,s,i,o,a,l,c,u=0;for(n=n.replace("-","+").replace("_","/");u<n.length;)o=e.indexOf(n.charAt(u++)),a=e.indexOf(n.charAt(u++)),l=e.indexOf(n.charAt(u++)),c=e.indexOf(n.charAt(u++)),r=o<<2|a>>4,s=(a&15)<<4|l>>2,i=(l&3)<<6|c,t=t+String.fromCharCode(r),l!=64&&s!=0&&(t=t+String.fromCharCode(s)),c!=64&&i!=0&&(t=t+String.fromCharCode(i));return t}class Ee{constructor(){this.promise=new Ee.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}Ee.promiseConstructor=Promise;function xt(n){const e=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,t=n.split(".");if(t.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!e.test(t[1]))throw new Error("JWT is not valid: payload is not in base64url format");const r=t[1];return JSON.parse(Br(r))}async function qr(n){return await new Promise(e=>{setTimeout(()=>e(null),n)})}function Jr(n,e){return new Promise((r,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await n(i);if(!e(i,null,o)){r(o);return}}catch(o){if(!e(i,o)){s(o);return}}})()})}function Kr(n){return("0"+n.toString(16)).substr(-2)}function Y(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=t.length;let s="";for(let i=0;i<56;i++)s+=t.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(e),Array.from(e,Kr).join("")}async function Wr(n){const t=new TextEncoder().encode(n),r=await crypto.subtle.digest("SHA-256",t),s=new Uint8Array(r);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}function Xr(n){return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Q(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const t=await Wr(n);return Xr(t)}class ut extends Error{constructor(e,t){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t}}function b(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class Yr extends ut{constructor(e,t){super(e,t),this.name="AuthApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}function Qr(n){return b(n)&&n.name==="AuthApiError"}class Yt extends ut{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class W extends ut{constructor(e,t,r){super(e),this.name=t,this.status=r}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Z extends W{constructor(){super("Auth session missing!","AuthSessionMissingError",400)}}class Le extends W{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500)}}class ye extends W{constructor(e){super(e,"AuthInvalidCredentialsError",400)}}class be extends W{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class kt extends W{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class We extends W{constructor(e,t){super(e,"AuthRetryableFetchError",t)}}function Me(n){return b(n)&&n.name==="AuthRetryableFetchError"}class Zr extends W{constructor(e,t,r){super(e,"AuthWeakPasswordError",t),this.reasons=r}}var es=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t};const ne=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),ts=[502,503,504];async function Pt(n){if(!zr(n))throw new We(ne(n),0);if(ts.includes(n.status))throw new We(ne(n),n.status);let e;try{e=await n.json()}catch(t){throw new Yt(ne(t),t)}throw typeof e=="object"&&e&&typeof e.weak_password=="object"&&e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.reasons.reduce((t,r)=>t&&typeof r=="string",!0)?new Zr(ne(e),n.status,e.weak_password.reasons):new Yr(ne(e),n.status||500)}const ns=(n,e,t,r)=>{const s={method:n,headers:e?.headers||{}};return n==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),t))};async function $(n,e,t,r){var s;const i=Object.assign({},r?.headers);r?.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const o=(s=r?.query)!==null&&s!==void 0?s:{};r?.redirectTo&&(o.redirect_to=r.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await rs(n,e,t+a,{headers:i,noResolveJson:r?.noResolveJson},{},r?.body);return r?.xform?r?.xform(l):{data:Object.assign({},l),error:null}}async function rs(n,e,t,r,s,i){const o=ns(e,r,s,i);let a;try{a=await n(t,o)}catch(l){throw console.error(l),new We(ne(l),0)}if(a.ok||await Pt(a),r?.noResolveJson)return a;try{return await a.json()}catch(l){await Pt(l)}}function J(n){var e;let t=null;as(n)&&(t=Object.assign({},n),n.expires_at||(t.expires_at=Ur(n.expires_in)));const r=(e=n.user)!==null&&e!==void 0?e:n;return{data:{session:t,user:r},error:null}}function Et(n){const e=J(n);return!e.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((t,r)=>t&&typeof r=="string",!0)&&(e.data.weak_password=n.weak_password),e}function G(n){var e;return{data:{user:(e=n.user)!==null&&e!==void 0?e:n},error:null}}function ss(n){return{data:n,error:null}}function is(n){const{action_link:e,email_otp:t,hashed_token:r,redirect_to:s,verification_type:i}=n,o=es(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:t,hashed_token:r,redirect_to:s,verification_type:i},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function os(n){return n}function as(n){return n.access_token&&n.refresh_token&&n.expires_in}var ls=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t};class us{constructor({url:e="",headers:t={},fetch:r}){this.url=e,this.headers=t,this.fetch=Xt(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t="global"){try{return await $(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(b(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,t={}){try{return await $(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:G})}catch(r){if(b(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:t}=e,r=ls(e,["options"]),s=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(s.new_email=r?.newEmail,delete s.newEmail),await $(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:is,redirectTo:t?.redirectTo})}catch(t){if(b(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await $(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:G})}catch(t){if(b(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,r,s,i,o,a,l;try{const c={nextPage:null,lastPage:0,total:0},u=await $(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(t=e?.page)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=e?.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:os});if(u.error)throw u.error;const d=await u.json(),g=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,h=(l=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return h.length>0&&(h.forEach(p=>{const f=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),m=JSON.parse(p.split(";")[1].split("=")[1]);c[`${m}Page`]=f}),c.total=parseInt(g)),{data:Object.assign(Object.assign({},d),c),error:null}}catch(c){if(b(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){try{return await $(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:G})}catch(t){if(b(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){try{return await $(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:G})}catch(r){if(b(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,t=!1){try{return await $(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:G})}catch(r){if(b(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){try{const{data:t,error:r}=await $(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:t,error:r}}catch(t){if(b(t))return{data:null,error:t};throw t}}async _deleteFactor(e){try{return{data:await $(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(b(t))return{data:null,error:t};throw t}}}const Qt="2.62.0",cs="http://localhost:9999",ds="supabase.auth.token",hs={"X-Client-Info":`gotrue-js/${Qt}`},Tt=10,gs={getItem:n=>ge()?globalThis.localStorage.getItem(n):null,setItem:(n,e)=>{ge()&&globalThis.localStorage.setItem(n,e)},removeItem:n=>{ge()&&globalThis.localStorage.removeItem(n)}};function At(n={}){return{getItem:e=>n[e]||null,setItem:(e,t)=>{n[e]=t},removeItem:e=>{delete n[e]}}}function fs(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const ee={debug:!!(globalThis&&ge()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Zt extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class ps extends Zt{}async function ms(n,e,t){ee.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),ee.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},e),await globalThis.navigator.locks.request(n,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){ee.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,s.name);try{return await t()}finally{ee.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,s.name)}}else{if(e===0)throw ee.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new ps(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(ee.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}})}fs();const vs={url:cs,storageKey:ds,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:hs,flowType:"implicit",debug:!1},le=30*1e3,It=3;async function Ft(n,e,t){return await t()}class pe{constructor(e){var t,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=pe.nextInstanceID,pe.nextInstanceID+=1,this.instanceID>0&&j()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},vs),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new us({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=Xt(s.fetch),this.lock=s.lock||Ft,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,s.lock?this.lock=s.lock:j()&&(!((t=globalThis?.navigator)===null||t===void 0)&&t.locks)?this.lock=ms:this.lock=Ft,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?s.storage?this.storage=s.storage:ge()?this.storage=gs:(this.memoryStorage={},this.storage=At(this.memoryStorage)):(this.memoryStorage={},this.storage=At(this.memoryStorage)),j()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Qt}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){try{const e=j()?await this._isPKCEFlow():!1;if(this._debug("#_initialize()","begin","is PKCE flow",e),e||this.detectSessionInUrl&&this._isImplicitGrantFlow()){const{data:t,error:r}=await this._getSessionFromURL(e);if(r)return this._debug("#_initialize()","error detecting session from URL",r),r?.message==="Identity is already linked"||r?.message==="Identity is already linked to another user"?{error:r}:(await this._removeSession(),{error:r});const{session:s,redirectType:i}=t;return this._debug("#_initialize()","detected session in URL",s,"redirect type",i),await this._saveSession(s),setTimeout(async()=>{i==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",s):await this._notifyAllSubscribers("SIGNED_IN",s)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(e){return b(e)?{error:e}:{error:new Yt("Unexpected error during initialization",e)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signUp(e){var t,r,s;try{await this._removeSession();let i;if("email"in e){const{email:u,password:d,options:g}=e;let h=null,p=null;if(this.flowType==="pkce"){const f=Y();await B(this.storage,`${this.storageKey}-code-verifier`,f),h=await Q(f),p=f===h?"plain":"s256"}i=await $(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:g?.emailRedirectTo,body:{email:u,password:d,data:(t=g?.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:g?.captchaToken},code_challenge:h,code_challenge_method:p},xform:J})}else if("phone"in e){const{phone:u,password:d,options:g}=e;i=await $(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:d,data:(r=g?.data)!==null&&r!==void 0?r:{},channel:(s=g?.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:g?.captchaToken}},xform:J})}else throw new ye("You must provide either an email or phone number and a password");const{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(i){if(b(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{await this._removeSession();let t;if("email"in e){const{email:i,password:o,options:a}=e;t=await $(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:a?.captchaToken}},xform:Et})}else if("phone"in e){const{phone:i,password:o,options:a}=e;t=await $(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:a?.captchaToken}},xform:Et})}else throw new ye("You must provide either an email or phone number and a password");const{data:r,error:s}=t;return s?{data:{user:null,session:null},error:s}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new Le}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(t){if(b(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,r,s,i;return await this._removeSession(),await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const t=await we(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(t??"").split("/"),{data:i,error:o}=await $(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:J});return await De(this.storage,`${this.storageKey}-code-verifier`),o?{data:{user:null,session:null,redirectType:null},error:o}:!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new Le}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}async signInWithIdToken(e){await this._removeSession();try{const{options:t,provider:r,token:s,access_token:i,nonce:o}=e,a=await $(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:t?.captchaToken}},xform:J}),{data:l,error:c}=a;return c?{data:{user:null,session:null},error:c}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new Le}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:c})}catch(t){if(b(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,r,s,i,o;try{if(await this._removeSession(),"email"in e){const{email:a,options:l}=e;let c=null,u=null;if(this.flowType==="pkce"){const g=Y();await B(this.storage,`${this.storageKey}-code-verifier`,g),c=await Q(g),u=g===c?"plain":"s256"}const{error:d}=await $(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(t=l?.data)!==null&&t!==void 0?t:{},create_user:(r=l?.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l?.captchaToken},code_challenge:c,code_challenge_method:u},redirectTo:l?.emailRedirectTo});return{data:{user:null,session:null},error:d}}if("phone"in e){const{phone:a,options:l}=e,{data:c,error:u}=await $(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(s=l?.data)!==null&&s!==void 0?s:{},create_user:(i=l?.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l?.captchaToken},channel:(o=l?.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:c?.message_id},error:u}}throw new ye("You must provide either an email or phone number.")}catch(a){if(b(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var t,r;try{e.type!=="email_change"&&e.type!=="phone_change"&&await this._removeSession();let s,i;"options"in e&&(s=(t=e.options)===null||t===void 0?void 0:t.redirectTo,i=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:a}=await $(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:J});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,c=o.user;return l?.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(s){if(b(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var t,r,s;try{await this._removeSession();let i=null,o=null;if(this.flowType==="pkce"){const a=Y();await B(this.storage,`${this.storageKey}-code-verifier`,a),i=await Q(a),o=a===i?"plain":"s256"}return await $(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=e?.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:ss})}catch(i){if(b(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:r}=e;if(r)throw r;if(!t)throw new Z;const{error:s}=await $(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(b(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{e.type!="email_change"&&e.type!="phone_change"&&await this._removeSession();const t=`${this.url}/resend`;if("email"in e){const{email:r,type:s,options:i}=e,{error:o}=await $(this.fetch,"POST",t,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:i?.captchaToken}},redirectTo:i?.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:r,type:s,options:i}=e,{data:o,error:a}=await $(this.fetch,"POST",t,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:i?.captchaToken}}});return{data:{user:null,session:null,messageId:o?.message_id},error:a}}throw new ye("You must provide either an email or phone number and a type")}catch(t){if(b(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,this._acquireLock(-1,async()=>this._useSession(async e=>e))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await t()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=t();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await we(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at<=Date.now()/1e3:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r)return{data:{session:e},error:null};const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await $(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:G}):await this._useSession(async t=>{var r,s;const{data:i,error:o}=t;if(o)throw o;return await $(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0,xform:G})})}catch(t){if(b(t))return{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async r=>{const{data:s,error:i}=r;if(i)throw i;if(!s.session)throw new Z;const o=s.session;let a=null,l=null;if(this.flowType==="pkce"&&e.email!=null){const d=Y();await B(this.storage,`${this.storageKey}-code-verifier`,d),a=await Q(d),l=d===a?"plain":"s256"}const{data:c,error:u}=await $(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:G});if(u)throw u;return o.user=c.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if(b(r))return{data:{user:null},error:r};throw r}}_decodeJWT(e){return xt(e)}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Z;const t=Date.now()/1e3;let r=t,s=!0,i=null;const o=xt(e.access_token);if(o.exp&&(r=o.exp,s=r<=t),s){const{session:a,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!a)return{data:{user:null,session:null},error:null};i=a}else{const{data:a,error:l}=await this._getUser(e.access_token);if(l)throw l;i={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:r-t,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(t){if(b(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var r;if(!e){const{data:o,error:a}=t;if(a)throw a;e=(r=o.session)!==null&&r!==void 0?r:void 0}if(!e?.refresh_token)throw new Z;const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(b(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e){try{if(!j())throw new be("No browser detected.");if(this.flowType==="implicit"&&!this._isImplicitGrantFlow())throw new be("Not a valid implicit grant flow url.");if(this.flowType=="pkce"&&!e)throw new kt("Not a valid PKCE flow url.");const t=je(window.location.href);if(e){if(!t.code)throw new kt("No code detected.");const{data:R,error:C}=await this._exchangeCodeForSession(t.code);if(C)throw C;const S=new URL(window.location.href);return S.searchParams.delete("code"),window.history.replaceState(window.history.state,"",S.toString()),{data:{session:R.session,redirectType:null},error:null}}if(t.error||t.error_description||t.error_code)throw new be(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});const{provider_token:r,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:a,expires_at:l,token_type:c}=t;if(!i||!a||!o||!c)throw new be("No session defined in URL");const u=Math.round(Date.now()/1e3),d=parseInt(a);let g=u+d;l&&(g=parseInt(l));const h=g-u;h*1e3<=le&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${h}s, should have been closer to ${d}s`);const p=g-d;u-p>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",p,g,u):u-p<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clok for skew",p,g,u);const{data:f,error:m}=await this._getUser(i);if(m)throw m;const w={provider_token:r,provider_refresh_token:s,access_token:i,expires_in:d,expires_at:g,refresh_token:o,token_type:c,user:f.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:w,redirectType:t.type},error:null}}catch(t){if(b(t))return{data:{session:null,redirectType:null},error:t};throw t}}_isImplicitGrantFlow(){const e=je(window.location.href);return!!(j()&&(e.access_token||e.error_description))}async _isPKCEFlow(){const e=je(window.location.href),t=await we(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var r;const{data:s,error:i}=t;if(i)return{error:i};const o=(r=s.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(Qr(a)&&(a.status===404||a.status===401)))return{error:a}}return e!=="others"&&(await this._removeSession(),await De(this.storage,`${this.storageKey}-code-verifier`),await this._notifyAllSubscribers("SIGNED_OUT",null)),{error:null}})}onAuthStateChange(e){const t=Hr(),r={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async t=>{var r,s;try{const{data:{session:i},error:o}=t;if(o)throw o;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,t={}){let r=null,s=null;if(this.flowType==="pkce"){const i=Y();await B(this.storage,`${this.storageKey}-code-verifier`,`${i}/PASSWORD_RECOVERY`),r=await Q(i),s=i===r?"plain":"s256"}try{return await $(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(i){if(b(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:t,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(b(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:r,error:s}=await this._useSession(async i=>{var o,a,l,c,u;const{data:d,error:g}=i;if(g)throw g;const h=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await $(this.fetch,"GET",h,{headers:this.headers,jwt:(u=(c=d.session)===null||c===void 0?void 0:c.access_token)!==null&&u!==void 0?u:void 0})});if(s)throw s;return j()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(r?.url),{data:{provider:e.provider,url:r?.url},error:null}}catch(r){if(b(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var r,s;const{data:i,error:o}=t;if(o)throw o;return await $(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(t){if(b(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const r=Date.now();return await Jr(async s=>(await qr(s*200),this._debug(t,"refreshing attempt",s),await $(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:J})),(s,i,o)=>o&&o.error&&Me(o.error)&&Date.now()+(s+1)*200-r<le)}catch(r){if(this._debug(t,"error",r),b(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",r),j()&&!t.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e;const t="#_recoverAndRefresh()";this._debug(t,"begin");try{const r=await we(this.storage,this.storageKey);if(this._debug(t,"session from storage",r),!this._isValidSession(r)){this._debug(t,"session is not valid"),r!==null&&await this._removeSession();return}const s=Math.round(Date.now()/1e3),i=((e=r.expires_at)!==null&&e!==void 0?e:1/0)<s+Tt;if(this._debug(t,`session has${i?"":" not"} expired with margin of ${Tt}s`),i){if(this.autoRefreshToken&&r.refresh_token){const{error:o}=await this._callRefreshToken(r.refresh_token);o&&(console.error(o),Me(o)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(t,"error",r),console.error(r);return}finally{this._debug(t,"end")}}async _callRefreshToken(e){var t,r;if(!e)throw new Z;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Ee;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new Z;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const a={session:i.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(i){if(this._debug(s,"error",i),b(i)){const o={session:null,error:i};return Me(i)||(await this._removeSession(),await this._notifyAllSubscribers("SIGNED_OUT",null)),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,t,r=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",t,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:t});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,t)}catch(l){i.push(l)}});if(await Promise.all(o),i.length>0){for(let a=0;a<i.length;a+=1)console.error(i[a]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),await B(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await De(this.storage,this.storageKey)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&j()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),le);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:r}}=t;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-e)/le);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${le}ms, refresh threshold is ${It} ticks`),s<=It&&await this._callRefreshToken(r.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Zt)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!j()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,r){const s=[`provider=${encodeURIComponent(t)}`];if(r?.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r?.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const i=Y();await B(this.storage,`${this.storageKey}-code-verifier`,i);const o=await Q(i),a=i===o?"plain":"s256";this._debug("PKCE","code verifier",`${i.substring(0,5)}...`,"code challenge",o,"method",a);const l=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(a)}`});s.push(l.toString())}if(r?.queryParams){const i=new URLSearchParams(r.queryParams);s.push(i.toString())}return r?.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var r;const{data:s,error:i}=t;return i?{data:null,error:i}:await $(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=s?.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(b(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var r,s;const{data:i,error:o}=t;if(o)return{data:null,error:o};const{data:a,error:l}=await $(this.fetch,"POST",`${this.url}/factors`,{body:{friendly_name:e.friendlyName,factor_type:e.factorType,issuer:e.issuer},headers:this.headers,jwt:(r=i?.session)===null||r===void 0?void 0:r.access_token});return l?{data:null,error:l}:(!((s=a?.totp)===null||s===void 0)&&s.qr_code&&(a.totp.qr_code=`data:image/svg+xml;utf-8,${a.totp.qr_code}`),{data:a,error:null})})}catch(t){if(b(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:s,error:i}=t;if(i)return{data:null,error:i};const{data:o,error:a}=await $(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=s?.session)===null||r===void 0?void 0:r.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:a})})}catch(t){if(b(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:s,error:i}=t;return i?{data:null,error:i}:await $(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{headers:this.headers,jwt:(r=s?.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(b(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const r=e?.factors||[],s=r.filter(i=>i.factor_type==="totp"&&i.status==="verified");return{data:{all:r,totp:s},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,r;const{data:{session:s},error:i}=e;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const o=this._decodeJWT(s.access_token);let a=null;o.aal&&(a=o.aal);let l=a;((r=(t=s.user.factors)===null||t===void 0?void 0:t.filter(d=>d.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const u=o.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:u},error:null}}))}}pe.nextInstanceID=0;class _s extends pe{constructor(e){super(e)}}var ws=function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})};const ys={headers:jr},bs={schema:"public"},Ss={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},$s={};class Cs{constructor(e,t,r){var s,i,o,a,l,c,u,d;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const g=Gr(e);this.realtimeUrl=`${g}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${g}/auth/v1`,this.storageUrl=`${g}/storage/v1`,this.functionsUrl=`${g}/functions/v1`;const h=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,p={db:bs,realtime:$s,auth:Object.assign(Object.assign({},Ss),{storageKey:h}),global:ys},f=Nr(r??{},p);this.storageKey=(i=(s=f.auth)===null||s===void 0?void 0:s.storageKey)!==null&&i!==void 0?i:"",this.headers=(a=(o=f.global)===null||o===void 0?void 0:o.headers)!==null&&a!==void 0?a:{},this.auth=this._initSupabaseAuthClient((l=f.auth)!==null&&l!==void 0?l:{},this.headers,(c=f.global)===null||c===void 0?void 0:c.fetch),this.fetch=Vr(t,this._getAccessToken.bind(this),(u=f.global)===null||u===void 0?void 0:u.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers},f.realtime)),this.rest=new ot(`${g}/rest/v1`,{headers:this.headers,schema:(d=f.db)===null||d===void 0?void 0:d.schema,fetch:this.fetch}),this._listenForAuthEvents()}get functions(){return new Yn(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Fr(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return ws(this,void 0,void 0,function*(){const{data:r}=yield this.auth.getSession();return(t=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:s,storageKey:i,flowType:o,debug:a},l,c){const u={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new _s({url:this.authUrl,headers:Object.assign(Object.assign({},u),l),storageKey:i,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:s,flowType:o,debug:a,fetch:c})}_initRealtimeClient(e){return new yr(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,r)=>{this._handleTokenChanged(t,"CLIENT",r?.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.realtime.setAuth(r??null),this.changedAccessToken=r):e==="SIGNED_OUT"&&(this.realtime.setAuth(this.supabaseKey),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Rs=(n,e,t)=>new Cs(n,e,t),xs=Rs("https://julmljxhwxryomcqfvol.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imp1bG1sanhod3hyeW9tY3Fmdm9sIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MDQwMjcxNDgsImV4cCI6MjAxOTYwMzE0OH0.pTv51RFvPXdvr_KXeuuO-bCvPWFdwvpB4fCBKQxqLVM");/**
 * table-core
 *
 * Copyright (c) TanStack
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function N(n,e){return typeof n=="function"?n(e):n}function I(n,e){return t=>{e.setState(r=>({...r,[n]:N(t,r[n])}))}}function xe(n){return n instanceof Function}function ks(n){return Array.isArray(n)&&n.every(e=>typeof e=="number")}function Ps(n,e){const t=[],r=s=>{s.forEach(i=>{t.push(i);const o=e(i);o!=null&&o.length&&r(o)})};return r(n),t}function y(n,e,t){let r=[],s;return()=>{let i;t.key&&t.debug&&(i=Date.now());const o=n();if(!(o.length!==r.length||o.some((c,u)=>r[u]!==c)))return s;r=o;let l;if(t.key&&t.debug&&(l=Date.now()),s=e(...o),t==null||t.onChange==null||t.onChange(s),t.key&&t.debug&&t!=null&&t.debug()){const c=Math.round((Date.now()-i)*100)/100,u=Math.round((Date.now()-l)*100)/100,d=u/16,g=(h,p)=>{for(h=String(h);h.length<p;)h=" "+h;return h};console.info(`%c⏱ ${g(u,5)} /${g(c,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*d,120))}deg 100% 31%);`,t?.key)}return s}}function Es(n,e,t,r){var s,i;const a={...n._getDefaultColumnDef(),...e},l=a.accessorKey;let c=(s=(i=a.id)!=null?i:l?l.replace(".","_"):void 0)!=null?s:typeof a.header=="string"?a.header:void 0,u;if(a.accessorFn?u=a.accessorFn:l&&(l.includes(".")?u=g=>{let h=g;for(const f of l.split(".")){var p;h=(p=h)==null?void 0:p[f]}return h}:u=g=>g[a.accessorKey]),!c)throw new Error;let d={id:`${String(c)}`,accessorFn:u,parent:r,depth:t,columnDef:a,columns:[],getFlatColumns:y(()=>[!0],()=>{var g;return[d,...(g=d.columns)==null?void 0:g.flatMap(h=>h.getFlatColumns())]},{key:"column.getFlatColumns",debug:()=>{var g;return(g=n.options.debugAll)!=null?g:n.options.debugColumns}}),getLeafColumns:y(()=>[n._getOrderColumnsFn()],g=>{var h;if((h=d.columns)!=null&&h.length){let p=d.columns.flatMap(f=>f.getLeafColumns());return g(p)}return[d]},{key:"column.getLeafColumns",debug:()=>{var g;return(g=n.options.debugAll)!=null?g:n.options.debugColumns}})};for(const g of n._features)g.createColumn==null||g.createColumn(d,n);return d}function Ot(n,e,t){var r;let i={id:(r=t.id)!=null?r:e.id,column:e,index:t.index,isPlaceholder:!!t.isPlaceholder,placeholderId:t.placeholderId,depth:t.depth,subHeaders:[],colSpan:0,rowSpan:0,headerGroup:null,getLeafHeaders:()=>{const o=[],a=l=>{l.subHeaders&&l.subHeaders.length&&l.subHeaders.map(a),o.push(l)};return a(i),o},getContext:()=>({table:n,header:i,column:e})};return n._features.forEach(o=>{o.createHeader==null||o.createHeader(i,n)}),i}const Ts={createTable:n=>{n.getHeaderGroups=y(()=>[n.getAllColumns(),n.getVisibleLeafColumns(),n.getState().columnPinning.left,n.getState().columnPinning.right],(e,t,r,s)=>{var i,o;const a=(i=r?.map(d=>t.find(g=>g.id===d)).filter(Boolean))!=null?i:[],l=(o=s?.map(d=>t.find(g=>g.id===d)).filter(Boolean))!=null?o:[],c=t.filter(d=>!(r!=null&&r.includes(d.id))&&!(s!=null&&s.includes(d.id)));return Se(e,[...a,...c,...l],n)},{key:!1,debug:()=>{var e;return(e=n.options.debugAll)!=null?e:n.options.debugHeaders}}),n.getCenterHeaderGroups=y(()=>[n.getAllColumns(),n.getVisibleLeafColumns(),n.getState().columnPinning.left,n.getState().columnPinning.right],(e,t,r,s)=>(t=t.filter(i=>!(r!=null&&r.includes(i.id))&&!(s!=null&&s.includes(i.id))),Se(e,t,n,"center")),{key:!1,debug:()=>{var e;return(e=n.options.debugAll)!=null?e:n.options.debugHeaders}}),n.getLeftHeaderGroups=y(()=>[n.getAllColumns(),n.getVisibleLeafColumns(),n.getState().columnPinning.left],(e,t,r)=>{var s;const i=(s=r?.map(o=>t.find(a=>a.id===o)).filter(Boolean))!=null?s:[];return Se(e,i,n,"left")},{key:!1,debug:()=>{var e;return(e=n.options.debugAll)!=null?e:n.options.debugHeaders}}),n.getRightHeaderGroups=y(()=>[n.getAllColumns(),n.getVisibleLeafColumns(),n.getState().columnPinning.right],(e,t,r)=>{var s;const i=(s=r?.map(o=>t.find(a=>a.id===o)).filter(Boolean))!=null?s:[];return Se(e,i,n,"right")},{key:!1,debug:()=>{var e;return(e=n.options.debugAll)!=null?e:n.options.debugHeaders}}),n.getFooterGroups=y(()=>[n.getHeaderGroups()],e=>[...e].reverse(),{key:!1,debug:()=>{var e;return(e=n.options.debugAll)!=null?e:n.options.debugHeaders}}),n.getLeftFooterGroups=y(()=>[n.getLeftHeaderGroups()],e=>[...e].reverse(),{key:!1,debug:()=>{var e;return(e=n.options.debugAll)!=null?e:n.options.debugHeaders}}),n.getCenterFooterGroups=y(()=>[n.getCenterHeaderGroups()],e=>[...e].reverse(),{key:!1,debug:()=>{var e;return(e=n.options.debugAll)!=null?e:n.options.debugHeaders}}),n.getRightFooterGroups=y(()=>[n.getRightHeaderGroups()],e=>[...e].reverse(),{key:!1,debug:()=>{var e;return(e=n.options.debugAll)!=null?e:n.options.debugHeaders}}),n.getFlatHeaders=y(()=>[n.getHeaderGroups()],e=>e.map(t=>t.headers).flat(),{key:!1,debug:()=>{var e;return(e=n.options.debugAll)!=null?e:n.options.debugHeaders}}),n.getLeftFlatHeaders=y(()=>[n.getLeftHeaderGroups()],e=>e.map(t=>t.headers).flat(),{key:!1,debug:()=>{var e;return(e=n.options.debugAll)!=null?e:n.options.debugHeaders}}),n.getCenterFlatHeaders=y(()=>[n.getCenterHeaderGroups()],e=>e.map(t=>t.headers).flat(),{key:!1,debug:()=>{var e;return(e=n.options.debugAll)!=null?e:n.options.debugHeaders}}),n.getRightFlatHeaders=y(()=>[n.getRightHeaderGroups()],e=>e.map(t=>t.headers).flat(),{key:!1,debug:()=>{var e;return(e=n.options.debugAll)!=null?e:n.options.debugHeaders}}),n.getCenterLeafHeaders=y(()=>[n.getCenterFlatHeaders()],e=>e.filter(t=>{var r;return!((r=t.subHeaders)!=null&&r.length)}),{key:!1,debug:()=>{var e;return(e=n.options.debugAll)!=null?e:n.options.debugHeaders}}),n.getLeftLeafHeaders=y(()=>[n.getLeftFlatHeaders()],e=>e.filter(t=>{var r;return!((r=t.subHeaders)!=null&&r.length)}),{key:!1,debug:()=>{var e;return(e=n.options.debugAll)!=null?e:n.options.debugHeaders}}),n.getRightLeafHeaders=y(()=>[n.getRightFlatHeaders()],e=>e.filter(t=>{var r;return!((r=t.subHeaders)!=null&&r.length)}),{key:!1,debug:()=>{var e;return(e=n.options.debugAll)!=null?e:n.options.debugHeaders}}),n.getLeafHeaders=y(()=>[n.getLeftHeaderGroups(),n.getCenterHeaderGroups(),n.getRightHeaderGroups()],(e,t,r)=>{var s,i,o,a,l,c;return[...(s=(i=e[0])==null?void 0:i.headers)!=null?s:[],...(o=(a=t[0])==null?void 0:a.headers)!=null?o:[],...(l=(c=r[0])==null?void 0:c.headers)!=null?l:[]].map(u=>u.getLeafHeaders()).flat()},{key:!1,debug:()=>{var e;return(e=n.options.debugAll)!=null?e:n.options.debugHeaders}})}};function Se(n,e,t,r){var s,i;let o=0;const a=function(g,h){h===void 0&&(h=1),o=Math.max(o,h),g.filter(p=>p.getIsVisible()).forEach(p=>{var f;(f=p.columns)!=null&&f.length&&a(p.columns,h+1)},0)};a(n);let l=[];const c=(g,h)=>{const p={depth:h,id:[r,`${h}`].filter(Boolean).join("_"),headers:[]},f=[];g.forEach(m=>{const w=[...f].reverse()[0],R=m.column.depth===p.depth;let C,S=!1;if(R&&m.column.parent?C=m.column.parent:(C=m.column,S=!0),w&&w?.column===C)w.subHeaders.push(m);else{const P=Ot(t,C,{id:[r,h,C.id,m?.id].filter(Boolean).join("_"),isPlaceholder:S,placeholderId:S?`${f.filter(H=>H.column===C).length}`:void 0,depth:h,index:f.length});P.subHeaders.push(m),f.push(P)}p.headers.push(m),m.headerGroup=p}),l.push(p),h>0&&c(f,h-1)},u=e.map((g,h)=>Ot(t,g,{depth:o,index:h}));c(u,o-1),l.reverse();const d=g=>g.filter(p=>p.column.getIsVisible()).map(p=>{let f=0,m=0,w=[0];p.subHeaders&&p.subHeaders.length?(w=[],d(p.subHeaders).forEach(C=>{let{colSpan:S,rowSpan:P}=C;f+=S,w.push(P)})):f=1;const R=Math.min(...w);return m=m+R,p.colSpan=f,p.rowSpan=m,{colSpan:f,rowSpan:m}});return d((s=(i=l[0])==null?void 0:i.headers)!=null?s:[]),l}const $e={size:150,minSize:20,maxSize:Number.MAX_SAFE_INTEGER},Ve=()=>({startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,isResizingColumn:!1,columnSizingStart:[]}),As={getDefaultColumnDef:()=>$e,getInitialState:n=>({columnSizing:{},columnSizingInfo:Ve(),...n}),getDefaultOptions:n=>({columnResizeMode:"onEnd",columnResizeDirection:"ltr",onColumnSizingChange:I("columnSizing",n),onColumnSizingInfoChange:I("columnSizingInfo",n)}),createColumn:(n,e)=>{n.getSize=()=>{var t,r,s;const i=e.getState().columnSizing[n.id];return Math.min(Math.max((t=n.columnDef.minSize)!=null?t:$e.minSize,(r=i??n.columnDef.size)!=null?r:$e.size),(s=n.columnDef.maxSize)!=null?s:$e.maxSize)},n.getStart=t=>{const r=t?t==="left"?e.getLeftVisibleLeafColumns():e.getRightVisibleLeafColumns():e.getVisibleLeafColumns(),s=r.findIndex(i=>i.id===n.id);if(s>0){const i=r[s-1];return i.getStart(t)+i.getSize()}return 0},n.resetSize=()=>{e.setColumnSizing(t=>{let{[n.id]:r,...s}=t;return s})},n.getCanResize=()=>{var t,r;return((t=n.columnDef.enableResizing)!=null?t:!0)&&((r=e.options.enableColumnResizing)!=null?r:!0)},n.getIsResizing=()=>e.getState().columnSizingInfo.isResizingColumn===n.id},createHeader:(n,e)=>{n.getSize=()=>{let t=0;const r=s=>{if(s.subHeaders.length)s.subHeaders.forEach(r);else{var i;t+=(i=s.column.getSize())!=null?i:0}};return r(n),t},n.getStart=()=>{if(n.index>0){const t=n.headerGroup.headers[n.index-1];return t.getStart()+t.getSize()}return 0},n.getResizeHandler=()=>{const t=e.getColumn(n.column.id),r=t?.getCanResize();return s=>{if(!t||!r||(s.persist==null||s.persist(),Ge(s)&&s.touches&&s.touches.length>1))return;const i=n.getSize(),o=n?n.getLeafHeaders().map(f=>[f.column.id,f.column.getSize()]):[[t.id,t.getSize()]],a=Ge(s)?Math.round(s.touches[0].clientX):s.clientX,l={},c=(f,m)=>{typeof m=="number"&&(e.setColumnSizingInfo(w=>{var R,C;const S=e.options.columnResizeDirection==="rtl"?-1:1,P=(m-((R=w?.startOffset)!=null?R:0))*S,H=Math.max(P/((C=w?.startSize)!=null?C:0),-.999999);return w.columnSizingStart.forEach(_e=>{let[Tn,vt]=_e;l[Tn]=Math.round(Math.max(vt+vt*H,0)*100)/100}),{...w,deltaOffset:P,deltaPercentage:H}}),(e.options.columnResizeMode==="onChange"||f==="end")&&e.setColumnSizing(w=>({...w,...l})))},u=f=>c("move",f),d=f=>{c("end",f),e.setColumnSizingInfo(m=>({...m,isResizingColumn:!1,startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,columnSizingStart:[]}))},g={moveHandler:f=>u(f.clientX),upHandler:f=>{document.removeEventListener("mousemove",g.moveHandler),document.removeEventListener("mouseup",g.upHandler),d(f.clientX)}},h={moveHandler:f=>(f.cancelable&&(f.preventDefault(),f.stopPropagation()),u(f.touches[0].clientX),!1),upHandler:f=>{var m;document.removeEventListener("touchmove",h.moveHandler),document.removeEventListener("touchend",h.upHandler),f.cancelable&&(f.preventDefault(),f.stopPropagation()),d((m=f.touches[0])==null?void 0:m.clientX)}},p=Is()?{passive:!1}:!1;Ge(s)?(document.addEventListener("touchmove",h.moveHandler,p),document.addEventListener("touchend",h.upHandler,p)):(document.addEventListener("mousemove",g.moveHandler,p),document.addEventListener("mouseup",g.upHandler,p)),e.setColumnSizingInfo(f=>({...f,startOffset:a,startSize:i,deltaOffset:0,deltaPercentage:0,columnSizingStart:o,isResizingColumn:t.id}))}}},createTable:n=>{n.setColumnSizing=e=>n.options.onColumnSizingChange==null?void 0:n.options.onColumnSizingChange(e),n.setColumnSizingInfo=e=>n.options.onColumnSizingInfoChange==null?void 0:n.options.onColumnSizingInfoChange(e),n.resetColumnSizing=e=>{var t;n.setColumnSizing(e?{}:(t=n.initialState.columnSizing)!=null?t:{})},n.resetHeaderSizeInfo=e=>{var t;n.setColumnSizingInfo(e?Ve():(t=n.initialState.columnSizingInfo)!=null?t:Ve())},n.getTotalSize=()=>{var e,t;return(e=(t=n.getHeaderGroups()[0])==null?void 0:t.headers.reduce((r,s)=>r+s.getSize(),0))!=null?e:0},n.getLeftTotalSize=()=>{var e,t;return(e=(t=n.getLeftHeaderGroups()[0])==null?void 0:t.headers.reduce((r,s)=>r+s.getSize(),0))!=null?e:0},n.getCenterTotalSize=()=>{var e,t;return(e=(t=n.getCenterHeaderGroups()[0])==null?void 0:t.headers.reduce((r,s)=>r+s.getSize(),0))!=null?e:0},n.getRightTotalSize=()=>{var e,t;return(e=(t=n.getRightHeaderGroups()[0])==null?void 0:t.headers.reduce((r,s)=>r+s.getSize(),0))!=null?e:0}}};let Ce=null;function Is(){if(typeof Ce=="boolean")return Ce;let n=!1;try{const e={get passive(){return n=!0,!1}},t=()=>{};window.addEventListener("test",t,e),window.removeEventListener("test",t)}catch{n=!1}return Ce=n,Ce}function Ge(n){return n.type==="touchstart"}const Fs={getInitialState:n=>({expanded:{},...n}),getDefaultOptions:n=>({onExpandedChange:I("expanded",n),paginateExpandedRows:!0}),createTable:n=>{let e=!1,t=!1;n._autoResetExpanded=()=>{var r,s;if(!e){n._queue(()=>{e=!0});return}if((r=(s=n.options.autoResetAll)!=null?s:n.options.autoResetExpanded)!=null?r:!n.options.manualExpanding){if(t)return;t=!0,n._queue(()=>{n.resetExpanded(),t=!1})}},n.setExpanded=r=>n.options.onExpandedChange==null?void 0:n.options.onExpandedChange(r),n.toggleAllRowsExpanded=r=>{r??!n.getIsAllRowsExpanded()?n.setExpanded(!0):n.setExpanded({})},n.resetExpanded=r=>{var s,i;n.setExpanded(r?{}:(s=(i=n.initialState)==null?void 0:i.expanded)!=null?s:{})},n.getCanSomeRowsExpand=()=>n.getPrePaginationRowModel().flatRows.some(r=>r.getCanExpand()),n.getToggleAllRowsExpandedHandler=()=>r=>{r.persist==null||r.persist(),n.toggleAllRowsExpanded()},n.getIsSomeRowsExpanded=()=>{const r=n.getState().expanded;return r===!0||Object.values(r).some(Boolean)},n.getIsAllRowsExpanded=()=>{const r=n.getState().expanded;return typeof r=="boolean"?r===!0:!(!Object.keys(r).length||n.getRowModel().flatRows.some(s=>!s.getIsExpanded()))},n.getExpandedDepth=()=>{let r=0;return(n.getState().expanded===!0?Object.keys(n.getRowModel().rowsById):Object.keys(n.getState().expanded)).forEach(i=>{const o=i.split(".");r=Math.max(r,o.length)}),r},n.getPreExpandedRowModel=()=>n.getSortedRowModel(),n.getExpandedRowModel=()=>(!n._getExpandedRowModel&&n.options.getExpandedRowModel&&(n._getExpandedRowModel=n.options.getExpandedRowModel(n)),n.options.manualExpanding||!n._getExpandedRowModel?n.getPreExpandedRowModel():n._getExpandedRowModel())},createRow:(n,e)=>{n.toggleExpanded=t=>{e.setExpanded(r=>{var s;const i=r===!0?!0:!!(r!=null&&r[n.id]);let o={};if(r===!0?Object.keys(e.getRowModel().rowsById).forEach(a=>{o[a]=!0}):o=r,t=(s=t)!=null?s:!i,!i&&t)return{...o,[n.id]:!0};if(i&&!t){const{[n.id]:a,...l}=o;return l}return r})},n.getIsExpanded=()=>{var t;const r=e.getState().expanded;return!!((t=e.options.getIsRowExpanded==null?void 0:e.options.getIsRowExpanded(n))!=null?t:r===!0||r?.[n.id])},n.getCanExpand=()=>{var t,r,s;return(t=e.options.getRowCanExpand==null?void 0:e.options.getRowCanExpand(n))!=null?t:((r=e.options.enableExpanding)!=null?r:!0)&&!!((s=n.subRows)!=null&&s.length)},n.getIsAllParentsExpanded=()=>{let t=!0,r=n;for(;t&&r.parentId;)r=e.getRow(r.parentId,!0),t=r.getIsExpanded();return t},n.getToggleExpandedHandler=()=>{const t=n.getCanExpand();return()=>{t&&n.toggleExpanded()}}}},en=(n,e,t)=>{var r;const s=t.toLowerCase();return!!(!((r=n.getValue(e))==null||(r=r.toString())==null||(r=r.toLowerCase())==null)&&r.includes(s))};en.autoRemove=n=>L(n);const tn=(n,e,t)=>{var r;return!!(!((r=n.getValue(e))==null||(r=r.toString())==null)&&r.includes(t))};tn.autoRemove=n=>L(n);const nn=(n,e,t)=>{var r;return((r=n.getValue(e))==null||(r=r.toString())==null?void 0:r.toLowerCase())===t?.toLowerCase()};nn.autoRemove=n=>L(n);const rn=(n,e,t)=>{var r;return(r=n.getValue(e))==null?void 0:r.includes(t)};rn.autoRemove=n=>L(n)||!(n!=null&&n.length);const sn=(n,e,t)=>!t.some(r=>{var s;return!((s=n.getValue(e))!=null&&s.includes(r))});sn.autoRemove=n=>L(n)||!(n!=null&&n.length);const on=(n,e,t)=>t.some(r=>{var s;return(s=n.getValue(e))==null?void 0:s.includes(r)});on.autoRemove=n=>L(n)||!(n!=null&&n.length);const an=(n,e,t)=>n.getValue(e)===t;an.autoRemove=n=>L(n);const ln=(n,e,t)=>n.getValue(e)==t;ln.autoRemove=n=>L(n);const ct=(n,e,t)=>{let[r,s]=t;const i=n.getValue(e);return i>=r&&i<=s};ct.resolveFilterValue=n=>{let[e,t]=n,r=typeof e!="number"?parseFloat(e):e,s=typeof t!="number"?parseFloat(t):t,i=e===null||Number.isNaN(r)?-1/0:r,o=t===null||Number.isNaN(s)?1/0:s;if(i>o){const a=i;i=o,o=a}return[i,o]};ct.autoRemove=n=>L(n)||L(n[0])&&L(n[1]);const M={includesString:en,includesStringSensitive:tn,equalsString:nn,arrIncludes:rn,arrIncludesAll:sn,arrIncludesSome:on,equals:an,weakEquals:ln,inNumberRange:ct};function L(n){return n==null||n===""}const Os={getDefaultColumnDef:()=>({filterFn:"auto"}),getInitialState:n=>({columnFilters:[],globalFilter:void 0,...n}),getDefaultOptions:n=>({onColumnFiltersChange:I("columnFilters",n),onGlobalFilterChange:I("globalFilter",n),filterFromLeafRows:!1,maxLeafRowFilterDepth:100,globalFilterFn:"auto",getColumnCanGlobalFilter:e=>{var t;const r=(t=n.getCoreRowModel().flatRows[0])==null||(t=t._getAllCellsByColumnId()[e.id])==null?void 0:t.getValue();return typeof r=="string"||typeof r=="number"}}),createColumn:(n,e)=>{n.getAutoFilterFn=()=>{const t=e.getCoreRowModel().flatRows[0],r=t?.getValue(n.id);return typeof r=="string"?M.includesString:typeof r=="number"?M.inNumberRange:typeof r=="boolean"||r!==null&&typeof r=="object"?M.equals:Array.isArray(r)?M.arrIncludes:M.weakEquals},n.getFilterFn=()=>{var t,r;return xe(n.columnDef.filterFn)?n.columnDef.filterFn:n.columnDef.filterFn==="auto"?n.getAutoFilterFn():(t=(r=e.options.filterFns)==null?void 0:r[n.columnDef.filterFn])!=null?t:M[n.columnDef.filterFn]},n.getCanFilter=()=>{var t,r,s;return((t=n.columnDef.enableColumnFilter)!=null?t:!0)&&((r=e.options.enableColumnFilters)!=null?r:!0)&&((s=e.options.enableFilters)!=null?s:!0)&&!!n.accessorFn},n.getCanGlobalFilter=()=>{var t,r,s,i;return((t=n.columnDef.enableGlobalFilter)!=null?t:!0)&&((r=e.options.enableGlobalFilter)!=null?r:!0)&&((s=e.options.enableFilters)!=null?s:!0)&&((i=e.options.getColumnCanGlobalFilter==null?void 0:e.options.getColumnCanGlobalFilter(n))!=null?i:!0)&&!!n.accessorFn},n.getIsFiltered=()=>n.getFilterIndex()>-1,n.getFilterValue=()=>{var t;return(t=e.getState().columnFilters)==null||(t=t.find(r=>r.id===n.id))==null?void 0:t.value},n.getFilterIndex=()=>{var t,r;return(t=(r=e.getState().columnFilters)==null?void 0:r.findIndex(s=>s.id===n.id))!=null?t:-1},n.setFilterValue=t=>{e.setColumnFilters(r=>{const s=n.getFilterFn(),i=r?.find(u=>u.id===n.id),o=N(t,i?i.value:void 0);if(jt(s,o,n)){var a;return(a=r?.filter(u=>u.id!==n.id))!=null?a:[]}const l={id:n.id,value:o};if(i){var c;return(c=r?.map(u=>u.id===n.id?l:u))!=null?c:[]}return r!=null&&r.length?[...r,l]:[l]})},n._getFacetedRowModel=e.options.getFacetedRowModel&&e.options.getFacetedRowModel(e,n.id),n.getFacetedRowModel=()=>n._getFacetedRowModel?n._getFacetedRowModel():e.getPreFilteredRowModel(),n._getFacetedUniqueValues=e.options.getFacetedUniqueValues&&e.options.getFacetedUniqueValues(e,n.id),n.getFacetedUniqueValues=()=>n._getFacetedUniqueValues?n._getFacetedUniqueValues():new Map,n._getFacetedMinMaxValues=e.options.getFacetedMinMaxValues&&e.options.getFacetedMinMaxValues(e,n.id),n.getFacetedMinMaxValues=()=>{if(n._getFacetedMinMaxValues)return n._getFacetedMinMaxValues()}},createRow:(n,e)=>{n.columnFilters={},n.columnFiltersMeta={}},createTable:n=>{n.getGlobalAutoFilterFn=()=>M.includesString,n.getGlobalFilterFn=()=>{var e,t;const{globalFilterFn:r}=n.options;return xe(r)?r:r==="auto"?n.getGlobalAutoFilterFn():(e=(t=n.options.filterFns)==null?void 0:t[r])!=null?e:M[r]},n.setColumnFilters=e=>{const t=n.getAllLeafColumns(),r=s=>{var i;return(i=N(e,s))==null?void 0:i.filter(o=>{const a=t.find(l=>l.id===o.id);if(a){const l=a.getFilterFn();if(jt(l,o.value,a))return!1}return!0})};n.options.onColumnFiltersChange==null||n.options.onColumnFiltersChange(r)},n.setGlobalFilter=e=>{n.options.onGlobalFilterChange==null||n.options.onGlobalFilterChange(e)},n.resetGlobalFilter=e=>{n.setGlobalFilter(e?void 0:n.initialState.globalFilter)},n.resetColumnFilters=e=>{var t,r;n.setColumnFilters(e?[]:(t=(r=n.initialState)==null?void 0:r.columnFilters)!=null?t:[])},n.getPreFilteredRowModel=()=>n.getCoreRowModel(),n.getFilteredRowModel=()=>(!n._getFilteredRowModel&&n.options.getFilteredRowModel&&(n._getFilteredRowModel=n.options.getFilteredRowModel(n)),n.options.manualFiltering||!n._getFilteredRowModel?n.getPreFilteredRowModel():n._getFilteredRowModel()),n._getGlobalFacetedRowModel=n.options.getFacetedRowModel&&n.options.getFacetedRowModel(n,"__global__"),n.getGlobalFacetedRowModel=()=>n.options.manualFiltering||!n._getGlobalFacetedRowModel?n.getPreFilteredRowModel():n._getGlobalFacetedRowModel(),n._getGlobalFacetedUniqueValues=n.options.getFacetedUniqueValues&&n.options.getFacetedUniqueValues(n,"__global__"),n.getGlobalFacetedUniqueValues=()=>n._getGlobalFacetedUniqueValues?n._getGlobalFacetedUniqueValues():new Map,n._getGlobalFacetedMinMaxValues=n.options.getFacetedMinMaxValues&&n.options.getFacetedMinMaxValues(n,"__global__"),n.getGlobalFacetedMinMaxValues=()=>{if(n._getGlobalFacetedMinMaxValues)return n._getGlobalFacetedMinMaxValues()}}};function jt(n,e,t){return(n&&n.autoRemove?n.autoRemove(e,t):!1)||typeof e>"u"||typeof e=="string"&&!e}const js=(n,e,t)=>t.reduce((r,s)=>{const i=s.getValue(n);return r+(typeof i=="number"?i:0)},0),Ds=(n,e,t)=>{let r;return t.forEach(s=>{const i=s.getValue(n);i!=null&&(r>i||r===void 0&&i>=i)&&(r=i)}),r},Ls=(n,e,t)=>{let r;return t.forEach(s=>{const i=s.getValue(n);i!=null&&(r<i||r===void 0&&i>=i)&&(r=i)}),r},Ms=(n,e,t)=>{let r,s;return t.forEach(i=>{const o=i.getValue(n);o!=null&&(r===void 0?o>=o&&(r=s=o):(r>o&&(r=o),s<o&&(s=o)))}),[r,s]},Vs=(n,e)=>{let t=0,r=0;if(e.forEach(s=>{let i=s.getValue(n);i!=null&&(i=+i)>=i&&(++t,r+=i)}),t)return r/t},Gs=(n,e)=>{if(!e.length)return;const t=e.map(i=>i.getValue(n));if(!ks(t))return;if(t.length===1)return t[0];const r=Math.floor(t.length/2),s=t.sort((i,o)=>i-o);return t.length%2!==0?s[r]:(s[r-1]+s[r])/2},Ns=(n,e)=>Array.from(new Set(e.map(t=>t.getValue(n))).values()),Us=(n,e)=>new Set(e.map(t=>t.getValue(n))).size,Hs=(n,e)=>e.length,Ne={sum:js,min:Ds,max:Ls,extent:Ms,mean:Vs,median:Gs,unique:Ns,uniqueCount:Us,count:Hs},zs={getDefaultColumnDef:()=>({aggregatedCell:n=>{var e,t;return(e=(t=n.getValue())==null||t.toString==null?void 0:t.toString())!=null?e:null},aggregationFn:"auto"}),getInitialState:n=>({grouping:[],...n}),getDefaultOptions:n=>({onGroupingChange:I("grouping",n),groupedColumnMode:"reorder"}),createColumn:(n,e)=>{n.toggleGrouping=()=>{e.setGrouping(t=>t!=null&&t.includes(n.id)?t.filter(r=>r!==n.id):[...t??[],n.id])},n.getCanGroup=()=>{var t,r,s,i;return(t=(r=(s=(i=n.columnDef.enableGrouping)!=null?i:!0)!=null?s:e.options.enableGrouping)!=null?r:!0)!=null?t:!!n.accessorFn},n.getIsGrouped=()=>{var t;return(t=e.getState().grouping)==null?void 0:t.includes(n.id)},n.getGroupedIndex=()=>{var t;return(t=e.getState().grouping)==null?void 0:t.indexOf(n.id)},n.getToggleGroupingHandler=()=>{const t=n.getCanGroup();return()=>{t&&n.toggleGrouping()}},n.getAutoAggregationFn=()=>{const t=e.getCoreRowModel().flatRows[0],r=t?.getValue(n.id);if(typeof r=="number")return Ne.sum;if(Object.prototype.toString.call(r)==="[object Date]")return Ne.extent},n.getAggregationFn=()=>{var t,r;if(!n)throw new Error;return xe(n.columnDef.aggregationFn)?n.columnDef.aggregationFn:n.columnDef.aggregationFn==="auto"?n.getAutoAggregationFn():(t=(r=e.options.aggregationFns)==null?void 0:r[n.columnDef.aggregationFn])!=null?t:Ne[n.columnDef.aggregationFn]}},createTable:n=>{n.setGrouping=e=>n.options.onGroupingChange==null?void 0:n.options.onGroupingChange(e),n.resetGrouping=e=>{var t,r;n.setGrouping(e?[]:(t=(r=n.initialState)==null?void 0:r.grouping)!=null?t:[])},n.getPreGroupedRowModel=()=>n.getFilteredRowModel(),n.getGroupedRowModel=()=>(!n._getGroupedRowModel&&n.options.getGroupedRowModel&&(n._getGroupedRowModel=n.options.getGroupedRowModel(n)),n.options.manualGrouping||!n._getGroupedRowModel?n.getPreGroupedRowModel():n._getGroupedRowModel())},createRow:(n,e)=>{n.getIsGrouped=()=>!!n.groupingColumnId,n.getGroupingValue=t=>{if(n._groupingValuesCache.hasOwnProperty(t))return n._groupingValuesCache[t];const r=e.getColumn(t);return r!=null&&r.columnDef.getGroupingValue?(n._groupingValuesCache[t]=r.columnDef.getGroupingValue(n.original),n._groupingValuesCache[t]):n.getValue(t)},n._groupingValuesCache={}},createCell:(n,e,t,r)=>{n.getIsGrouped=()=>e.getIsGrouped()&&e.id===t.groupingColumnId,n.getIsPlaceholder=()=>!n.getIsGrouped()&&e.getIsGrouped(),n.getIsAggregated=()=>{var s;return!n.getIsGrouped()&&!n.getIsPlaceholder()&&!!((s=t.subRows)!=null&&s.length)}}};function Bs(n,e,t){if(!(e!=null&&e.length)||!t)return n;const r=n.filter(i=>!e.includes(i.id));return t==="remove"?r:[...e.map(i=>n.find(o=>o.id===i)).filter(Boolean),...r]}const qs={getInitialState:n=>({columnOrder:[],...n}),getDefaultOptions:n=>({onColumnOrderChange:I("columnOrder",n)}),createTable:n=>{n.setColumnOrder=e=>n.options.onColumnOrderChange==null?void 0:n.options.onColumnOrderChange(e),n.resetColumnOrder=e=>{var t;n.setColumnOrder(e?[]:(t=n.initialState.columnOrder)!=null?t:[])},n._getOrderColumnsFn=y(()=>[n.getState().columnOrder,n.getState().grouping,n.options.groupedColumnMode],(e,t,r)=>s=>{let i=[];if(!(e!=null&&e.length))i=s;else{const o=[...e],a=[...s];for(;a.length&&o.length;){const l=o.shift(),c=a.findIndex(u=>u.id===l);c>-1&&i.push(a.splice(c,1)[0])}i=[...i,...a]}return Bs(i,t,r)},{key:!1})}},Xe=0,Ye=10,Ue=()=>({pageIndex:Xe,pageSize:Ye}),Js={getInitialState:n=>({...n,pagination:{...Ue(),...n?.pagination}}),getDefaultOptions:n=>({onPaginationChange:I("pagination",n)}),createTable:n=>{let e=!1,t=!1;n._autoResetPageIndex=()=>{var r,s;if(!e){n._queue(()=>{e=!0});return}if((r=(s=n.options.autoResetAll)!=null?s:n.options.autoResetPageIndex)!=null?r:!n.options.manualPagination){if(t)return;t=!0,n._queue(()=>{n.resetPageIndex(),t=!1})}},n.setPagination=r=>{const s=i=>N(r,i);return n.options.onPaginationChange==null?void 0:n.options.onPaginationChange(s)},n.resetPagination=r=>{var s;n.setPagination(r?Ue():(s=n.initialState.pagination)!=null?s:Ue())},n.setPageIndex=r=>{n.setPagination(s=>{let i=N(r,s.pageIndex);const o=typeof n.options.pageCount>"u"||n.options.pageCount===-1?Number.MAX_SAFE_INTEGER:n.options.pageCount-1;return i=Math.max(0,Math.min(i,o)),{...s,pageIndex:i}})},n.resetPageIndex=r=>{var s,i;n.setPageIndex(r?Xe:(s=(i=n.initialState)==null||(i=i.pagination)==null?void 0:i.pageIndex)!=null?s:Xe)},n.resetPageSize=r=>{var s,i;n.setPageSize(r?Ye:(s=(i=n.initialState)==null||(i=i.pagination)==null?void 0:i.pageSize)!=null?s:Ye)},n.setPageSize=r=>{n.setPagination(s=>{const i=Math.max(1,N(r,s.pageSize)),o=s.pageSize*s.pageIndex,a=Math.floor(o/i);return{...s,pageIndex:a,pageSize:i}})},n.setPageCount=r=>n.setPagination(s=>{var i;let o=N(r,(i=n.options.pageCount)!=null?i:-1);return typeof o=="number"&&(o=Math.max(-1,o)),{...s,pageCount:o}}),n.getPageOptions=y(()=>[n.getPageCount()],r=>{let s=[];return r&&r>0&&(s=[...new Array(r)].fill(null).map((i,o)=>o)),s},{key:!1,debug:()=>{var r;return(r=n.options.debugAll)!=null?r:n.options.debugTable}}),n.getCanPreviousPage=()=>n.getState().pagination.pageIndex>0,n.getCanNextPage=()=>{const{pageIndex:r}=n.getState().pagination,s=n.getPageCount();return s===-1?!0:s===0?!1:r<s-1},n.previousPage=()=>n.setPageIndex(r=>r-1),n.nextPage=()=>n.setPageIndex(r=>r+1),n.getPrePaginationRowModel=()=>n.getExpandedRowModel(),n.getPaginationRowModel=()=>(!n._getPaginationRowModel&&n.options.getPaginationRowModel&&(n._getPaginationRowModel=n.options.getPaginationRowModel(n)),n.options.manualPagination||!n._getPaginationRowModel?n.getPrePaginationRowModel():n._getPaginationRowModel()),n.getPageCount=()=>{var r;return(r=n.options.pageCount)!=null?r:Math.ceil(n.getPrePaginationRowModel().rows.length/n.getState().pagination.pageSize)}}},He=()=>({left:[],right:[]}),ze=()=>({top:[],bottom:[]}),Ks={getInitialState:n=>({columnPinning:He(),rowPinning:ze(),...n}),getDefaultOptions:n=>({onColumnPinningChange:I("columnPinning",n),onRowPinningChange:I("rowPinning",n)}),createColumn:(n,e)=>{n.pin=t=>{const r=n.getLeafColumns().map(s=>s.id).filter(Boolean);e.setColumnPinning(s=>{var i,o;if(t==="right"){var a,l;return{left:((a=s?.left)!=null?a:[]).filter(d=>!(r!=null&&r.includes(d))),right:[...((l=s?.right)!=null?l:[]).filter(d=>!(r!=null&&r.includes(d))),...r]}}if(t==="left"){var c,u;return{left:[...((c=s?.left)!=null?c:[]).filter(d=>!(r!=null&&r.includes(d))),...r],right:((u=s?.right)!=null?u:[]).filter(d=>!(r!=null&&r.includes(d)))}}return{left:((i=s?.left)!=null?i:[]).filter(d=>!(r!=null&&r.includes(d))),right:((o=s?.right)!=null?o:[]).filter(d=>!(r!=null&&r.includes(d)))}})},n.getCanPin=()=>n.getLeafColumns().some(r=>{var s,i,o;return((s=r.columnDef.enablePinning)!=null?s:!0)&&((i=(o=e.options.enableColumnPinning)!=null?o:e.options.enablePinning)!=null?i:!0)}),n.getIsPinned=()=>{const t=n.getLeafColumns().map(a=>a.id),{left:r,right:s}=e.getState().columnPinning,i=t.some(a=>r?.includes(a)),o=t.some(a=>s?.includes(a));return i?"left":o?"right":!1},n.getPinnedIndex=()=>{var t,r;const s=n.getIsPinned();return s?(t=(r=e.getState().columnPinning)==null||(r=r[s])==null?void 0:r.indexOf(n.id))!=null?t:-1:0}},createRow:(n,e)=>{n.pin=(t,r,s)=>{const i=r?n.getLeafRows().map(l=>{let{id:c}=l;return c}):[],o=s?n.getParentRows().map(l=>{let{id:c}=l;return c}):[],a=new Set([...o,n.id,...i]);e.setRowPinning(l=>{var c,u;if(t==="bottom"){var d,g;return{top:((d=l?.top)!=null?d:[]).filter(f=>!(a!=null&&a.has(f))),bottom:[...((g=l?.bottom)!=null?g:[]).filter(f=>!(a!=null&&a.has(f))),...Array.from(a)]}}if(t==="top"){var h,p;return{top:[...((h=l?.top)!=null?h:[]).filter(f=>!(a!=null&&a.has(f))),...Array.from(a)],bottom:((p=l?.bottom)!=null?p:[]).filter(f=>!(a!=null&&a.has(f)))}}return{top:((c=l?.top)!=null?c:[]).filter(f=>!(a!=null&&a.has(f))),bottom:((u=l?.bottom)!=null?u:[]).filter(f=>!(a!=null&&a.has(f)))}})},n.getCanPin=()=>{var t;const{enableRowPinning:r,enablePinning:s}=e.options;return typeof r=="function"?r(n):(t=r??s)!=null?t:!0},n.getIsPinned=()=>{const t=[n.id],{top:r,bottom:s}=e.getState().rowPinning,i=t.some(a=>r?.includes(a)),o=t.some(a=>s?.includes(a));return i?"top":o?"bottom":!1},n.getPinnedIndex=()=>{var t,r;const s=n.getIsPinned();if(!s)return-1;const i=(t=e._getPinnedRows(s))==null?void 0:t.map(o=>{let{id:a}=o;return a});return(r=i?.indexOf(n.id))!=null?r:-1},n.getCenterVisibleCells=y(()=>[n._getAllVisibleCells(),e.getState().columnPinning.left,e.getState().columnPinning.right],(t,r,s)=>{const i=[...r??[],...s??[]];return t.filter(o=>!i.includes(o.column.id))},{key:!1,debug:()=>{var t;return(t=e.options.debugAll)!=null?t:e.options.debugRows}}),n.getLeftVisibleCells=y(()=>[n._getAllVisibleCells(),e.getState().columnPinning.left,,],(t,r)=>(r??[]).map(i=>t.find(o=>o.column.id===i)).filter(Boolean).map(i=>({...i,position:"left"})),{key:!1,debug:()=>{var t;return(t=e.options.debugAll)!=null?t:e.options.debugRows}}),n.getRightVisibleCells=y(()=>[n._getAllVisibleCells(),e.getState().columnPinning.right],(t,r)=>(r??[]).map(i=>t.find(o=>o.column.id===i)).filter(Boolean).map(i=>({...i,position:"right"})),{key:!1,debug:()=>{var t;return(t=e.options.debugAll)!=null?t:e.options.debugRows}})},createTable:n=>{n.setColumnPinning=e=>n.options.onColumnPinningChange==null?void 0:n.options.onColumnPinningChange(e),n.resetColumnPinning=e=>{var t,r;return n.setColumnPinning(e?He():(t=(r=n.initialState)==null?void 0:r.columnPinning)!=null?t:He())},n.getIsSomeColumnsPinned=e=>{var t;const r=n.getState().columnPinning;if(!e){var s,i;return!!((s=r.left)!=null&&s.length||(i=r.right)!=null&&i.length)}return!!((t=r[e])!=null&&t.length)},n.getLeftLeafColumns=y(()=>[n.getAllLeafColumns(),n.getState().columnPinning.left],(e,t)=>(t??[]).map(r=>e.find(s=>s.id===r)).filter(Boolean),{key:!1,debug:()=>{var e;return(e=n.options.debugAll)!=null?e:n.options.debugColumns}}),n.getRightLeafColumns=y(()=>[n.getAllLeafColumns(),n.getState().columnPinning.right],(e,t)=>(t??[]).map(r=>e.find(s=>s.id===r)).filter(Boolean),{key:!1,debug:()=>{var e;return(e=n.options.debugAll)!=null?e:n.options.debugColumns}}),n.getCenterLeafColumns=y(()=>[n.getAllLeafColumns(),n.getState().columnPinning.left,n.getState().columnPinning.right],(e,t,r)=>{const s=[...t??[],...r??[]];return e.filter(i=>!s.includes(i.id))},{key:!1,debug:()=>{var e;return(e=n.options.debugAll)!=null?e:n.options.debugColumns}}),n.setRowPinning=e=>n.options.onRowPinningChange==null?void 0:n.options.onRowPinningChange(e),n.resetRowPinning=e=>{var t,r;return n.setRowPinning(e?ze():(t=(r=n.initialState)==null?void 0:r.rowPinning)!=null?t:ze())},n.getIsSomeRowsPinned=e=>{var t;const r=n.getState().rowPinning;if(!e){var s,i;return!!((s=r.top)!=null&&s.length||(i=r.bottom)!=null&&i.length)}return!!((t=r[e])!=null&&t.length)},n._getPinnedRows=e=>y(()=>[n.getRowModel().rows,n.getState().rowPinning[e]],(t,r)=>{var s;return((s=n.options.keepPinnedRows)==null||s?(r??[]).map(o=>{const a=n.getRow(o,!0);return a.getIsAllParentsExpanded()?a:null}):(r??[]).map(o=>t.find(a=>a.id===o))).filter(Boolean).map(o=>({...o,position:e}))},{key:!1,debug:()=>{var t;return(t=n.options.debugAll)!=null?t:n.options.debugRows}})(),n.getTopRows=()=>n._getPinnedRows("top"),n.getBottomRows=()=>n._getPinnedRows("bottom"),n.getCenterRows=y(()=>[n.getRowModel().rows,n.getState().rowPinning.top,n.getState().rowPinning.bottom],(e,t,r)=>{const s=new Set([...t??[],...r??[]]);return e.filter(i=>!s.has(i.id))},{key:!1,debug:()=>{var e;return(e=n.options.debugAll)!=null?e:n.options.debugRows}})}},Ws={getInitialState:n=>({rowSelection:{},...n}),getDefaultOptions:n=>({onRowSelectionChange:I("rowSelection",n),enableRowSelection:!0,enableMultiRowSelection:!0,enableSubRowSelection:!0}),createTable:n=>{n.setRowSelection=e=>n.options.onRowSelectionChange==null?void 0:n.options.onRowSelectionChange(e),n.resetRowSelection=e=>{var t;return n.setRowSelection(e?{}:(t=n.initialState.rowSelection)!=null?t:{})},n.toggleAllRowsSelected=e=>{n.setRowSelection(t=>{e=typeof e<"u"?e:!n.getIsAllRowsSelected();const r={...t},s=n.getPreGroupedRowModel().flatRows;return e?s.forEach(i=>{i.getCanSelect()&&(r[i.id]=!0)}):s.forEach(i=>{delete r[i.id]}),r})},n.toggleAllPageRowsSelected=e=>n.setRowSelection(t=>{const r=typeof e<"u"?e:!n.getIsAllPageRowsSelected(),s={...t};return n.getRowModel().rows.forEach(i=>{Qe(s,i.id,r,!0,n)}),s}),n.getPreSelectedRowModel=()=>n.getCoreRowModel(),n.getSelectedRowModel=y(()=>[n.getState().rowSelection,n.getCoreRowModel()],(e,t)=>Object.keys(e).length?Be(n,t):{rows:[],flatRows:[],rowsById:{}},{key:!1,debug:()=>{var e;return(e=n.options.debugAll)!=null?e:n.options.debugTable}}),n.getFilteredSelectedRowModel=y(()=>[n.getState().rowSelection,n.getFilteredRowModel()],(e,t)=>Object.keys(e).length?Be(n,t):{rows:[],flatRows:[],rowsById:{}},{key:"getFilteredSelectedRowModel",debug:()=>{var e;return(e=n.options.debugAll)!=null?e:n.options.debugTable}}),n.getGroupedSelectedRowModel=y(()=>[n.getState().rowSelection,n.getSortedRowModel()],(e,t)=>Object.keys(e).length?Be(n,t):{rows:[],flatRows:[],rowsById:{}},{key:"getGroupedSelectedRowModel",debug:()=>{var e;return(e=n.options.debugAll)!=null?e:n.options.debugTable}}),n.getIsAllRowsSelected=()=>{const e=n.getFilteredRowModel().flatRows,{rowSelection:t}=n.getState();let r=!!(e.length&&Object.keys(t).length);return r&&e.some(s=>s.getCanSelect()&&!t[s.id])&&(r=!1),r},n.getIsAllPageRowsSelected=()=>{const e=n.getPaginationRowModel().flatRows.filter(s=>s.getCanSelect()),{rowSelection:t}=n.getState();let r=!!e.length;return r&&e.some(s=>!t[s.id])&&(r=!1),r},n.getIsSomeRowsSelected=()=>{var e;const t=Object.keys((e=n.getState().rowSelection)!=null?e:{}).length;return t>0&&t<n.getFilteredRowModel().flatRows.length},n.getIsSomePageRowsSelected=()=>{const e=n.getPaginationRowModel().flatRows;return n.getIsAllPageRowsSelected()?!1:e.filter(t=>t.getCanSelect()).some(t=>t.getIsSelected()||t.getIsSomeSelected())},n.getToggleAllRowsSelectedHandler=()=>e=>{n.toggleAllRowsSelected(e.target.checked)},n.getToggleAllPageRowsSelectedHandler=()=>e=>{n.toggleAllPageRowsSelected(e.target.checked)}},createRow:(n,e)=>{n.toggleSelected=(t,r)=>{const s=n.getIsSelected();e.setRowSelection(i=>{var o;if(t=typeof t<"u"?t:!s,n.getCanSelect()&&s===t)return i;const a={...i};return Qe(a,n.id,t,(o=r?.selectChildren)!=null?o:!0,e),a})},n.getIsSelected=()=>{const{rowSelection:t}=e.getState();return dt(n,t)},n.getIsSomeSelected=()=>{const{rowSelection:t}=e.getState();return Ze(n,t)==="some"},n.getIsAllSubRowsSelected=()=>{const{rowSelection:t}=e.getState();return Ze(n,t)==="all"},n.getCanSelect=()=>{var t;return typeof e.options.enableRowSelection=="function"?e.options.enableRowSelection(n):(t=e.options.enableRowSelection)!=null?t:!0},n.getCanSelectSubRows=()=>{var t;return typeof e.options.enableSubRowSelection=="function"?e.options.enableSubRowSelection(n):(t=e.options.enableSubRowSelection)!=null?t:!0},n.getCanMultiSelect=()=>{var t;return typeof e.options.enableMultiRowSelection=="function"?e.options.enableMultiRowSelection(n):(t=e.options.enableMultiRowSelection)!=null?t:!0},n.getToggleSelectedHandler=()=>{const t=n.getCanSelect();return r=>{var s;t&&n.toggleSelected((s=r.target)==null?void 0:s.checked)}}}},Qe=(n,e,t,r,s)=>{var i;const o=s.getRow(e,!0);t?(o.getCanMultiSelect()||Object.keys(n).forEach(a=>delete n[a]),o.getCanSelect()&&(n[e]=!0)):delete n[e],r&&(i=o.subRows)!=null&&i.length&&o.getCanSelectSubRows()&&o.subRows.forEach(a=>Qe(n,a.id,t,r,s))};function Be(n,e){const t=n.getState().rowSelection,r=[],s={},i=function(o,a){return o.map(l=>{var c;const u=dt(l,t);if(u&&(r.push(l),s[l.id]=l),(c=l.subRows)!=null&&c.length&&(l={...l,subRows:i(l.subRows)}),u)return l}).filter(Boolean)};return{rows:i(e.rows),flatRows:r,rowsById:s}}function dt(n,e){var t;return(t=e[n.id])!=null?t:!1}function Ze(n,e,t){var r;if(!((r=n.subRows)!=null&&r.length))return!1;let s=!0,i=!1;return n.subRows.forEach(o=>{if(!(i&&!s)&&(o.getCanSelect()&&(dt(o,e)?i=!0:s=!1),o.subRows&&o.subRows.length)){const a=Ze(o,e);a==="all"?i=!0:(a==="some"&&(i=!0),s=!1)}}),s?"all":i?"some":!1}const et=/([0-9]+)/gm,Xs=(n,e,t)=>un(U(n.getValue(t)).toLowerCase(),U(e.getValue(t)).toLowerCase()),Ys=(n,e,t)=>un(U(n.getValue(t)),U(e.getValue(t))),Qs=(n,e,t)=>ht(U(n.getValue(t)).toLowerCase(),U(e.getValue(t)).toLowerCase()),Zs=(n,e,t)=>ht(U(n.getValue(t)),U(e.getValue(t))),ei=(n,e,t)=>{const r=n.getValue(t),s=e.getValue(t);return r>s?1:r<s?-1:0},ti=(n,e,t)=>ht(n.getValue(t),e.getValue(t));function ht(n,e){return n===e?0:n>e?1:-1}function U(n){return typeof n=="number"?isNaN(n)||n===1/0||n===-1/0?"":String(n):typeof n=="string"?n:""}function un(n,e){const t=n.split(et).filter(Boolean),r=e.split(et).filter(Boolean);for(;t.length&&r.length;){const s=t.shift(),i=r.shift(),o=parseInt(s,10),a=parseInt(i,10),l=[o,a].sort();if(isNaN(l[0])){if(s>i)return 1;if(i>s)return-1;continue}if(isNaN(l[1]))return isNaN(o)?-1:1;if(o>a)return 1;if(a>o)return-1}return t.length-r.length}const ue={alphanumeric:Xs,alphanumericCaseSensitive:Ys,text:Qs,textCaseSensitive:Zs,datetime:ei,basic:ti},ni={getInitialState:n=>({sorting:[],...n}),getDefaultColumnDef:()=>({sortingFn:"auto",sortUndefined:1}),getDefaultOptions:n=>({onSortingChange:I("sorting",n),isMultiSortEvent:e=>e.shiftKey}),createColumn:(n,e)=>{n.getAutoSortingFn=()=>{const t=e.getFilteredRowModel().flatRows.slice(10);let r=!1;for(const s of t){const i=s?.getValue(n.id);if(Object.prototype.toString.call(i)==="[object Date]")return ue.datetime;if(typeof i=="string"&&(r=!0,i.split(et).length>1))return ue.alphanumeric}return r?ue.text:ue.basic},n.getAutoSortDir=()=>{const t=e.getFilteredRowModel().flatRows[0];return typeof t?.getValue(n.id)=="string"?"asc":"desc"},n.getSortingFn=()=>{var t,r;if(!n)throw new Error;return xe(n.columnDef.sortingFn)?n.columnDef.sortingFn:n.columnDef.sortingFn==="auto"?n.getAutoSortingFn():(t=(r=e.options.sortingFns)==null?void 0:r[n.columnDef.sortingFn])!=null?t:ue[n.columnDef.sortingFn]},n.toggleSorting=(t,r)=>{const s=n.getNextSortingOrder(),i=typeof t<"u"&&t!==null;e.setSorting(o=>{const a=o?.find(h=>h.id===n.id),l=o?.findIndex(h=>h.id===n.id);let c=[],u,d=i?t:s==="desc";if(o!=null&&o.length&&n.getCanMultiSort()&&r?a?u="toggle":u="add":o!=null&&o.length&&l!==o.length-1?u="replace":a?u="toggle":u="replace",u==="toggle"&&(i||s||(u="remove")),u==="add"){var g;c=[...o,{id:n.id,desc:d}],c.splice(0,c.length-((g=e.options.maxMultiSortColCount)!=null?g:Number.MAX_SAFE_INTEGER))}else u==="toggle"?c=o.map(h=>h.id===n.id?{...h,desc:d}:h):u==="remove"?c=o.filter(h=>h.id!==n.id):c=[{id:n.id,desc:d}];return c})},n.getFirstSortDir=()=>{var t,r;return((t=(r=n.columnDef.sortDescFirst)!=null?r:e.options.sortDescFirst)!=null?t:n.getAutoSortDir()==="desc")?"desc":"asc"},n.getNextSortingOrder=t=>{var r,s;const i=n.getFirstSortDir(),o=n.getIsSorted();return o?o!==i&&((r=e.options.enableSortingRemoval)==null||r)&&(!(t&&(s=e.options.enableMultiRemove)!=null)||s)?!1:o==="desc"?"asc":"desc":i},n.getCanSort=()=>{var t,r;return((t=n.columnDef.enableSorting)!=null?t:!0)&&((r=e.options.enableSorting)!=null?r:!0)&&!!n.accessorFn},n.getCanMultiSort=()=>{var t,r;return(t=(r=n.columnDef.enableMultiSort)!=null?r:e.options.enableMultiSort)!=null?t:!!n.accessorFn},n.getIsSorted=()=>{var t;const r=(t=e.getState().sorting)==null?void 0:t.find(s=>s.id===n.id);return r?r.desc?"desc":"asc":!1},n.getSortIndex=()=>{var t,r;return(t=(r=e.getState().sorting)==null?void 0:r.findIndex(s=>s.id===n.id))!=null?t:-1},n.clearSorting=()=>{e.setSorting(t=>t!=null&&t.length?t.filter(r=>r.id!==n.id):[])},n.getToggleSortingHandler=()=>{const t=n.getCanSort();return r=>{t&&(r.persist==null||r.persist(),n.toggleSorting==null||n.toggleSorting(void 0,n.getCanMultiSort()?e.options.isMultiSortEvent==null?void 0:e.options.isMultiSortEvent(r):!1))}}},createTable:n=>{n.setSorting=e=>n.options.onSortingChange==null?void 0:n.options.onSortingChange(e),n.resetSorting=e=>{var t,r;n.setSorting(e?[]:(t=(r=n.initialState)==null?void 0:r.sorting)!=null?t:[])},n.getPreSortedRowModel=()=>n.getGroupedRowModel(),n.getSortedRowModel=()=>(!n._getSortedRowModel&&n.options.getSortedRowModel&&(n._getSortedRowModel=n.options.getSortedRowModel(n)),n.options.manualSorting||!n._getSortedRowModel?n.getPreSortedRowModel():n._getSortedRowModel())}},ri={getInitialState:n=>({columnVisibility:{},...n}),getDefaultOptions:n=>({onColumnVisibilityChange:I("columnVisibility",n)}),createColumn:(n,e)=>{n.toggleVisibility=t=>{n.getCanHide()&&e.setColumnVisibility(r=>({...r,[n.id]:t??!n.getIsVisible()}))},n.getIsVisible=()=>{var t,r;return(t=(r=e.getState().columnVisibility)==null?void 0:r[n.id])!=null?t:!0},n.getCanHide=()=>{var t,r;return((t=n.columnDef.enableHiding)!=null?t:!0)&&((r=e.options.enableHiding)!=null?r:!0)},n.getToggleVisibilityHandler=()=>t=>{n.toggleVisibility==null||n.toggleVisibility(t.target.checked)}},createRow:(n,e)=>{n._getAllVisibleCells=y(()=>[n.getAllCells(),e.getState().columnVisibility],t=>t.filter(r=>r.column.getIsVisible()),{key:"row._getAllVisibleCells",debug:()=>{var t;return(t=e.options.debugAll)!=null?t:e.options.debugRows}}),n.getVisibleCells=y(()=>[n.getLeftVisibleCells(),n.getCenterVisibleCells(),n.getRightVisibleCells()],(t,r,s)=>[...t,...r,...s],{key:!1,debug:()=>{var t;return(t=e.options.debugAll)!=null?t:e.options.debugRows}})},createTable:n=>{const e=(t,r)=>y(()=>[r(),r().filter(s=>s.getIsVisible()).map(s=>s.id).join("_")],s=>s.filter(i=>i.getIsVisible==null?void 0:i.getIsVisible()),{key:t,debug:()=>{var s;return(s=n.options.debugAll)!=null?s:n.options.debugColumns}});n.getVisibleFlatColumns=e("getVisibleFlatColumns",()=>n.getAllFlatColumns()),n.getVisibleLeafColumns=e("getVisibleLeafColumns",()=>n.getAllLeafColumns()),n.getLeftVisibleLeafColumns=e("getLeftVisibleLeafColumns",()=>n.getLeftLeafColumns()),n.getRightVisibleLeafColumns=e("getRightVisibleLeafColumns",()=>n.getRightLeafColumns()),n.getCenterVisibleLeafColumns=e("getCenterVisibleLeafColumns",()=>n.getCenterLeafColumns()),n.setColumnVisibility=t=>n.options.onColumnVisibilityChange==null?void 0:n.options.onColumnVisibilityChange(t),n.resetColumnVisibility=t=>{var r;n.setColumnVisibility(t?{}:(r=n.initialState.columnVisibility)!=null?r:{})},n.toggleAllColumnsVisible=t=>{var r;t=(r=t)!=null?r:!n.getIsAllColumnsVisible(),n.setColumnVisibility(n.getAllLeafColumns().reduce((s,i)=>({...s,[i.id]:t||!(i.getCanHide!=null&&i.getCanHide())}),{}))},n.getIsAllColumnsVisible=()=>!n.getAllLeafColumns().some(t=>!(t.getIsVisible!=null&&t.getIsVisible())),n.getIsSomeColumnsVisible=()=>n.getAllLeafColumns().some(t=>t.getIsVisible==null?void 0:t.getIsVisible()),n.getToggleAllColumnsVisibilityHandler=()=>t=>{var r;n.toggleAllColumnsVisible((r=t.target)==null?void 0:r.checked)}}},Dt=[Ts,ri,qs,Ks,Os,ni,zs,Fs,Js,Ws,As];function si(n){var e;(n.debugAll||n.debugTable)&&console.info("Creating Table Instance...");let t={_features:Dt};const r=t._features.reduce((u,d)=>Object.assign(u,d.getDefaultOptions==null?void 0:d.getDefaultOptions(t)),{}),s=u=>t.options.mergeOptions?t.options.mergeOptions(r,u):{...r,...u};let o={...{},...(e=n.initialState)!=null?e:{}};t._features.forEach(u=>{var d;o=(d=u.getInitialState==null?void 0:u.getInitialState(o))!=null?d:o});const a=[];let l=!1;const c={_features:Dt,options:{...r,...n},initialState:o,_queue:u=>{a.push(u),l||(l=!0,Promise.resolve().then(()=>{for(;a.length;)a.shift()();l=!1}).catch(d=>setTimeout(()=>{throw d})))},reset:()=>{t.setState(t.initialState)},setOptions:u=>{const d=N(u,t.options);t.options=s(d)},getState:()=>t.options.state,setState:u=>{t.options.onStateChange==null||t.options.onStateChange(u)},_getRowId:(u,d,g)=>{var h;return(h=t.options.getRowId==null?void 0:t.options.getRowId(u,d,g))!=null?h:`${g?[g.id,d].join("."):d}`},getCoreRowModel:()=>(t._getCoreRowModel||(t._getCoreRowModel=t.options.getCoreRowModel(t)),t._getCoreRowModel()),getRowModel:()=>t.getPaginationRowModel(),getRow:(u,d)=>{const g=(d?t.getCoreRowModel():t.getRowModel()).rowsById[u];if(!g)throw new Error;return g},_getDefaultColumnDef:y(()=>[t.options.defaultColumn],u=>{var d;return u=(d=u)!=null?d:{},{header:g=>{const h=g.header.column.columnDef;return h.accessorKey?h.accessorKey:h.accessorFn?h.id:null},cell:g=>{var h,p;return(h=(p=g.renderValue())==null||p.toString==null?void 0:p.toString())!=null?h:null},...t._features.reduce((g,h)=>Object.assign(g,h.getDefaultColumnDef==null?void 0:h.getDefaultColumnDef()),{}),...u}},{debug:()=>{var u;return(u=t.options.debugAll)!=null?u:t.options.debugColumns},key:!1}),_getColumnDefs:()=>t.options.columns,getAllColumns:y(()=>[t._getColumnDefs()],u=>{const d=function(g,h,p){return p===void 0&&(p=0),g.map(f=>{const m=Es(t,f,p,h),w=f;return m.columns=w.columns?d(w.columns,m,p+1):[],m})};return d(u)},{key:!1,debug:()=>{var u;return(u=t.options.debugAll)!=null?u:t.options.debugColumns}}),getAllFlatColumns:y(()=>[t.getAllColumns()],u=>u.flatMap(d=>d.getFlatColumns()),{key:!1,debug:()=>{var u;return(u=t.options.debugAll)!=null?u:t.options.debugColumns}}),_getAllFlatColumnsById:y(()=>[t.getAllFlatColumns()],u=>u.reduce((d,g)=>(d[g.id]=g,d),{}),{key:!1,debug:()=>{var u;return(u=t.options.debugAll)!=null?u:t.options.debugColumns}}),getAllLeafColumns:y(()=>[t.getAllColumns(),t._getOrderColumnsFn()],(u,d)=>{let g=u.flatMap(h=>h.getLeafColumns());return d(g)},{key:!1,debug:()=>{var u;return(u=t.options.debugAll)!=null?u:t.options.debugColumns}}),getColumn:u=>t._getAllFlatColumnsById()[u]};Object.assign(t,c);for(let u=0;u<t._features.length;u++){const d=t._features[u];d==null||d.createTable==null||d.createTable(t)}return t}function ii(n,e,t,r){const s=()=>{var o;return(o=i.getValue())!=null?o:n.options.renderFallbackValue},i={id:`${e.id}_${t.id}`,row:e,column:t,getValue:()=>e.getValue(r),renderValue:s,getContext:y(()=>[n,t,e,i],(o,a,l,c)=>({table:o,column:a,row:l,cell:c,getValue:c.getValue,renderValue:c.renderValue}),{key:!1,debug:()=>n.options.debugAll})};return n._features.forEach(o=>{o.createCell==null||o.createCell(i,t,e,n)},{}),i}const gt=(n,e,t,r,s,i,o)=>{let a={id:e,index:r,original:t,depth:s,parentId:o,_valuesCache:{},_uniqueValuesCache:{},getValue:l=>{if(a._valuesCache.hasOwnProperty(l))return a._valuesCache[l];const c=n.getColumn(l);if(c!=null&&c.accessorFn)return a._valuesCache[l]=c.accessorFn(a.original,r),a._valuesCache[l]},getUniqueValues:l=>{if(a._uniqueValuesCache.hasOwnProperty(l))return a._uniqueValuesCache[l];const c=n.getColumn(l);if(c!=null&&c.accessorFn)return c.columnDef.getUniqueValues?(a._uniqueValuesCache[l]=c.columnDef.getUniqueValues(a.original,r),a._uniqueValuesCache[l]):(a._uniqueValuesCache[l]=[a.getValue(l)],a._uniqueValuesCache[l])},renderValue:l=>{var c;return(c=a.getValue(l))!=null?c:n.options.renderFallbackValue},subRows:i??[],getLeafRows:()=>Ps(a.subRows,l=>l.subRows),getParentRow:()=>a.parentId?n.getRow(a.parentId,!0):void 0,getParentRows:()=>{let l=[],c=a;for(;;){const u=c.getParentRow();if(!u)break;l.push(u),c=u}return l.reverse()},getAllCells:y(()=>[n.getAllLeafColumns()],l=>l.map(c=>ii(n,a,c,c.id)),{key:!1,debug:()=>{var l;return(l=n.options.debugAll)!=null?l:n.options.debugRows}}),_getAllCellsByColumnId:y(()=>[a.getAllCells()],l=>l.reduce((c,u)=>(c[u.column.id]=u,c),{}),{key:"row.getAllCellsByColumnId",debug:()=>{var l;return(l=n.options.debugAll)!=null?l:n.options.debugRows}})};for(let l=0;l<n._features.length;l++){const c=n._features[l];c==null||c.createRow==null||c.createRow(a,n)}return a};function oi(){return n=>y(()=>[n.options.data],e=>{const t={rows:[],flatRows:[],rowsById:{}},r=function(s,i,o){i===void 0&&(i=0);const a=[];for(let c=0;c<s.length;c++){const u=gt(n,n._getRowId(s[c],c,o),s[c],c,i,void 0,o?.id);if(t.flatRows.push(u),t.rowsById[u.id]=u,a.push(u),n.options.getSubRows){var l;u.originalSubRows=n.options.getSubRows(s[c],c),(l=u.originalSubRows)!=null&&l.length&&(u.subRows=r(u.originalSubRows,i+1,u))}}return a};return t.rows=r(e),t},{key:!1,debug:()=>{var e;return(e=n.options.debugAll)!=null?e:n.options.debugTable},onChange:()=>{n._autoResetPageIndex()}})}function ai(n,e,t){return t.options.filterFromLeafRows?li(n,e,t):ui(n,e,t)}function li(n,e,t){var r;const s=[],i={},o=(r=t.options.maxLeafRowFilterDepth)!=null?r:100,a=function(l,c){c===void 0&&(c=0);const u=[];for(let g=0;g<l.length;g++){var d;let h=l[g];const p=gt(t,h.id,h.original,h.index,h.depth,void 0,h.parentId);if(p.columnFilters=h.columnFilters,(d=h.subRows)!=null&&d.length&&c<o){if(p.subRows=a(h.subRows,c+1),h=p,e(h)&&!p.subRows.length){u.push(h),i[h.id]=h,s.push(h);continue}if(e(h)||p.subRows.length){u.push(h),i[h.id]=h,s.push(h);continue}}else h=p,e(h)&&(u.push(h),i[h.id]=h,s.push(h))}return u};return{rows:a(n),flatRows:s,rowsById:i}}function ui(n,e,t){var r;const s=[],i={},o=(r=t.options.maxLeafRowFilterDepth)!=null?r:100,a=function(l,c){c===void 0&&(c=0);const u=[];for(let g=0;g<l.length;g++){let h=l[g];if(e(h)){var d;if((d=h.subRows)!=null&&d.length&&c<o){const f=gt(t,h.id,h.original,h.index,h.depth,void 0,h.parentId);f.subRows=a(h.subRows,c+1),h=f}u.push(h),s.push(h),i[h.id]=h}}return u};return{rows:a(n),flatRows:s,rowsById:i}}function ci(){return n=>y(()=>[n.getPreFilteredRowModel(),n.getState().columnFilters,n.getState().globalFilter],(e,t,r)=>{if(!e.rows.length||!(t!=null&&t.length)&&!r){for(let g=0;g<e.flatRows.length;g++)e.flatRows[g].columnFilters={},e.flatRows[g].columnFiltersMeta={};return e}const s=[],i=[];(t??[]).forEach(g=>{var h;const p=n.getColumn(g.id);if(!p)return;const f=p.getFilterFn();f&&s.push({id:g.id,filterFn:f,resolvedValue:(h=f.resolveFilterValue==null?void 0:f.resolveFilterValue(g.value))!=null?h:g.value})});const o=t.map(g=>g.id),a=n.getGlobalFilterFn(),l=n.getAllLeafColumns().filter(g=>g.getCanGlobalFilter());r&&a&&l.length&&(o.push("__global__"),l.forEach(g=>{var h;i.push({id:g.id,filterFn:a,resolvedValue:(h=a.resolveFilterValue==null?void 0:a.resolveFilterValue(r))!=null?h:r})}));let c,u;for(let g=0;g<e.flatRows.length;g++){const h=e.flatRows[g];if(h.columnFilters={},s.length)for(let p=0;p<s.length;p++){c=s[p];const f=c.id;h.columnFilters[f]=c.filterFn(h,f,c.resolvedValue,m=>{h.columnFiltersMeta[f]=m})}if(i.length){for(let p=0;p<i.length;p++){u=i[p];const f=u.id;if(u.filterFn(h,f,u.resolvedValue,m=>{h.columnFiltersMeta[f]=m})){h.columnFilters.__global__=!0;break}}h.columnFilters.__global__!==!0&&(h.columnFilters.__global__=!1)}}const d=g=>{for(let h=0;h<o.length;h++)if(g.columnFilters[o[h]]===!1)return!1;return!0};return ai(e.rows,d,n)},{key:!1,debug:()=>{var e;return(e=n.options.debugAll)!=null?e:n.options.debugTable},onChange:()=>{n._autoResetPageIndex()}})}function di(){return n=>y(()=>[n.getState().sorting,n.getPreSortedRowModel()],(e,t)=>{if(!t.rows.length||!(e!=null&&e.length))return t;const r=n.getState().sorting,s=[],i=r.filter(l=>{var c;return(c=n.getColumn(l.id))==null?void 0:c.getCanSort()}),o={};i.forEach(l=>{const c=n.getColumn(l.id);c&&(o[l.id]={sortUndefined:c.columnDef.sortUndefined,invertSorting:c.columnDef.invertSorting,sortingFn:c.getSortingFn()})});const a=l=>{const c=l.map(u=>({...u}));return c.sort((u,d)=>{for(let h=0;h<i.length;h+=1){var g;const p=i[h],f=o[p.id],m=(g=p?.desc)!=null?g:!1;let w=0;if(f.sortUndefined){const R=u.getValue(p.id),C=d.getValue(p.id),S=R===void 0,P=C===void 0;(S||P)&&(w=S&&P?0:S?f.sortUndefined:-f.sortUndefined)}if(w===0&&(w=f.sortingFn(u,d,p.id)),w!==0)return m&&(w*=-1),f.invertSorting&&(w*=-1),w}return u.index-d.index}),c.forEach(u=>{var d;s.push(u),(d=u.subRows)!=null&&d.length&&(u.subRows=a(u.subRows))}),c};return{rows:a(t.rows),flatRows:s,rowsById:t.rowsById}},{key:!1,debug:()=>{var e;return(e=n.options.debugAll)!=null?e:n.options.debugTable},onChange:()=>{n._autoResetPageIndex()}})}function hi(n){const e=[],t=r=>{var s;e.push(r),(s=r.subRows)!=null&&s.length&&r.getIsExpanded()&&r.subRows.forEach(t)};return n.rows.forEach(t),{rows:e,flatRows:n.flatRows,rowsById:n.rowsById}}function gi(n){return e=>y(()=>[e.getState().pagination,e.getPrePaginationRowModel(),e.options.paginateExpandedRows?void 0:e.getState().expanded],(t,r)=>{if(!r.rows.length)return r;const{pageSize:s,pageIndex:i}=t;let{rows:o,flatRows:a,rowsById:l}=r;const c=s*i,u=c+s;o=o.slice(c,u);let d;e.options.paginateExpandedRows?d={rows:o,flatRows:a,rowsById:l}:d=hi({rows:o,flatRows:a,rowsById:l}),d.flatRows=[];const g=h=>{d.flatRows.push(h),h.subRows.length&&h.subRows.forEach(g)};return d.rows.forEach(g),d},{key:!1,debug:()=>{var t;return(t=e.options.debugAll)!=null?t:e.options.debugTable}})}/**
 * react-table
 *
 * Copyright (c) TanStack
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Lt(n,e){return n?fi(n)?v.createElement(n,e):n:null}function fi(n){return pi(n)||typeof n=="function"||mi(n)}function pi(n){return typeof n=="function"&&(()=>{const e=Object.getPrototypeOf(n);return e.prototype&&e.prototype.isReactComponent})()}function mi(n){return typeof n=="object"&&typeof n.$$typeof=="symbol"&&["react.memo","react.forward_ref"].includes(n.$$typeof.description)}function vi(n){const e={state:{},onStateChange:()=>{},renderFallbackValue:null,...n},[t]=v.useState(()=>({current:si(e)})),[r,s]=v.useState(()=>t.current.initialState);return t.current.setOptions(i=>({...i,...n,state:{...r,...n.state},onStateChange:o=>{s(o),n.onStateChange==null||n.onStateChange(o)}})),t.current}const _i=[{accessorKey:"name",header:"Name"},{accessorKey:"games",header:"Games",filterFn:(n,e,t)=>t===0||n.getValue("games")>=t},{accessorKey:"position",header:"Position",filterFn:(n,e,t)=>t===""||t.includes(n.getValue("position"))},{accessorKey:"space",header:({column:n})=>_.jsxs(re,{variant:"ghost",className:"p-0",onClick:()=>n.toggleSorting(n.getIsSorted()==="asc"),children:["Space (m",_.jsx("sup",{children:"2"}),")",_.jsx(An,{className:"ml-2 h-4 w-4"})]}),cell:({row:n})=>{const e=parseFloat(n.getValue("space")),t=new Intl.NumberFormat("en-US",{maximumFractionDigits:2}).format(e);return _.jsx("div",{className:"font-medium",children:t})}}],cn=v.forwardRef(({className:n,...e},t)=>_.jsx("div",{className:"relative w-full overflow-auto",children:_.jsx("table",{ref:t,className:F("w-full caption-bottom text-sm",n),...e})}));cn.displayName="Table";const dn=v.forwardRef(({className:n,...e},t)=>_.jsx("thead",{ref:t,className:F("[&_tr]:border-b",n),...e}));dn.displayName="TableHeader";const hn=v.forwardRef(({className:n,...e},t)=>_.jsx("tbody",{ref:t,className:F("[&_tr:last-child]:border-0",n),...e}));hn.displayName="TableBody";const wi=v.forwardRef(({className:n,...e},t)=>_.jsx("tfoot",{ref:t,className:F("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",n),...e}));wi.displayName="TableFooter";const Re=v.forwardRef(({className:n,...e},t)=>_.jsx("tr",{ref:t,className:F("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",n),...e}));Re.displayName="TableRow";const gn=v.forwardRef(({className:n,...e},t)=>_.jsx("th",{ref:t,className:F("h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",n),...e}));gn.displayName="TableHead";const tt=v.forwardRef(({className:n,...e},t)=>_.jsx("td",{ref:t,className:F("p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",n),...e}));tt.displayName="TableCell";const yi=v.forwardRef(({className:n,...e},t)=>_.jsx("caption",{ref:t,className:F("mt-4 text-sm text-muted-foreground",n),...e}));yi.displayName="TableCaption";const fn=v.forwardRef((n,e)=>{const{pressed:t,defaultPressed:r=!1,onPressedChange:s,...i}=n,[o=!1,a]=ke({prop:t,onChange:s,defaultProp:r});return v.createElement(fe.button,E({type:"button","aria-pressed":o,"data-state":o?"on":"off","data-disabled":n.disabled?"":void 0},i,{ref:e,onClick:q(n.onClick,()=>{n.disabled||a(!o)})}))}),pn=fn,Te="ToggleGroup",[mn,ao]=Ut(Te,[Gt]),vn=Gt(),bi=k.forwardRef((n,e)=>{const{type:t,...r}=n;if(t==="single"){const s=r;return k.createElement(Si,E({},s,{ref:e}))}if(t==="multiple"){const s=r;return k.createElement($i,E({},s,{ref:e}))}throw new Error(`Missing prop \`type\` expected on \`${Te}\``)}),[_n,wn]=mn(Te),Si=k.forwardRef((n,e)=>{const{value:t,defaultValue:r,onValueChange:s=()=>{},...i}=n,[o,a]=ke({prop:t,defaultProp:r,onChange:s});return k.createElement(_n,{scope:n.__scopeToggleGroup,type:"single",value:o?[o]:[],onItemActivate:a,onItemDeactivate:k.useCallback(()=>a(""),[a])},k.createElement(yn,E({},i,{ref:e})))}),$i=k.forwardRef((n,e)=>{const{value:t,defaultValue:r,onValueChange:s=()=>{},...i}=n,[o=[],a]=ke({prop:t,defaultProp:r,onChange:s}),l=k.useCallback(u=>a((d=[])=>[...d,u]),[a]),c=k.useCallback(u=>a((d=[])=>d.filter(g=>g!==u)),[a]);return k.createElement(_n,{scope:n.__scopeToggleGroup,type:"multiple",value:o,onItemActivate:l,onItemDeactivate:c},k.createElement(yn,E({},i,{ref:e})))}),[Ci,Ri]=mn(Te),yn=k.forwardRef((n,e)=>{const{__scopeToggleGroup:t,disabled:r=!1,rovingFocus:s=!0,orientation:i,dir:o,loop:a=!0,...l}=n,c=vn(t),u=Gn(o),d={role:"group",dir:u,...l};return k.createElement(Ci,{scope:t,rovingFocus:s,disabled:r},s?k.createElement(Fn,E({asChild:!0},c,{orientation:i,dir:u,loop:a}),k.createElement(fe.div,E({},d,{ref:e}))):k.createElement(fe.div,E({},d,{ref:e})))}),nt="ToggleGroupItem",xi=k.forwardRef((n,e)=>{const t=wn(nt,n.__scopeToggleGroup),r=Ri(nt,n.__scopeToggleGroup),s=vn(n.__scopeToggleGroup),i=t.value.includes(n.value),o=r.disabled||n.disabled,a={...n,pressed:i,disabled:o},l=k.useRef(null);return r.rovingFocus?k.createElement(On,E({asChild:!0},s,{focusable:!o,active:i,ref:l}),k.createElement(Mt,E({},a,{ref:e}))):k.createElement(Mt,E({},a,{ref:e}))}),Mt=k.forwardRef((n,e)=>{const{__scopeToggleGroup:t,value:r,...s}=n,i=wn(nt,t),o={role:"radio","aria-checked":n.pressed,"aria-pressed":void 0},a=i.type==="single"?o:void 0;return k.createElement(fn,E({},a,s,{ref:e,onPressedChange:l=>{l?i.onItemActivate(r):i.onItemDeactivate(r)}}))}),bn=bi,Sn=xi,$n=jn("inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground",{variants:{variant:{default:"bg-transparent",outline:"border border-input bg-transparent shadow-sm hover:bg-accent hover:text-accent-foreground"},size:{default:"h-9 px-3",sm:"h-8 px-2",lg:"h-10 px-3"}},defaultVariants:{variant:"default",size:"default"}}),ki=v.forwardRef(({className:n,variant:e,size:t,...r},s)=>_.jsx(pn,{ref:s,className:F($n({variant:e,size:t,className:n})),...r}));ki.displayName=pn.displayName;const Cn=v.createContext({size:"default",variant:"default"}),Rn=v.forwardRef(({className:n,variant:e,size:t,children:r,...s},i)=>_.jsx(bn,{ref:i,className:F("flex items-center justify-center gap-1",n),...s,children:_.jsx(Cn.Provider,{value:{variant:e,size:t},children:r})}));Rn.displayName=bn.displayName;const de=v.forwardRef(({className:n,children:e,variant:t,size:r,...s},i)=>{const o=v.useContext(Cn);return _.jsx(Sn,{ref:i,className:F($n({variant:o.variant||t,size:o.size||r}),n),...s,children:e})});de.displayName=Sn.displayName;const xn=v.forwardRef(({className:n,type:e,...t},r)=>_.jsx("input",{type:e,className:F("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",n),ref:r,...t}));xn.displayName="Input";const Pi=v.forwardRef((n,e)=>v.createElement(fe.span,E({},n,{ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...n.style}}))),Ei=Pi,[Ae,lo]=Ut("Tooltip",[Nt]),ft=Nt(),Ti="TooltipProvider",Ai=700,rt="tooltip.open",[Ii,pt]=Ae(Ti),Fi=n=>{const{__scopeTooltip:e,delayDuration:t=Ai,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:i}=n,[o,a]=v.useState(!0),l=v.useRef(!1),c=v.useRef(0);return v.useEffect(()=>{const u=c.current;return()=>window.clearTimeout(u)},[]),v.createElement(Ii,{scope:e,isOpenDelayed:o,delayDuration:t,onOpen:v.useCallback(()=>{window.clearTimeout(c.current),a(!1)},[]),onClose:v.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>a(!0),r)},[r]),isPointerInTransitRef:l,onPointerInTransitChange:v.useCallback(u=>{l.current=u},[]),disableHoverableContent:s},i)},mt="Tooltip",[Oi,Ie]=Ae(mt),ji=n=>{const{__scopeTooltip:e,children:t,open:r,defaultOpen:s=!1,onOpenChange:i,disableHoverableContent:o,delayDuration:a}=n,l=pt(mt,n.__scopeTooltip),c=ft(e),[u,d]=v.useState(null),g=Hn(),h=v.useRef(0),p=o??l.disableHoverableContent,f=a??l.delayDuration,m=v.useRef(!1),[w=!1,R]=ke({prop:r,defaultProp:s,onChange:_e=>{_e?(l.onOpen(),document.dispatchEvent(new CustomEvent(rt))):l.onClose(),i?.(_e)}}),C=v.useMemo(()=>w?m.current?"delayed-open":"instant-open":"closed",[w]),S=v.useCallback(()=>{window.clearTimeout(h.current),m.current=!1,R(!0)},[R]),P=v.useCallback(()=>{window.clearTimeout(h.current),R(!1)},[R]),H=v.useCallback(()=>{window.clearTimeout(h.current),h.current=window.setTimeout(()=>{m.current=!0,R(!0)},f)},[f,R]);return v.useEffect(()=>()=>window.clearTimeout(h.current),[]),v.createElement(Mn,c,v.createElement(Oi,{scope:e,contentId:g,open:w,stateAttribute:C,trigger:u,onTriggerChange:d,onTriggerEnter:v.useCallback(()=>{l.isOpenDelayed?H():S()},[l.isOpenDelayed,H,S]),onTriggerLeave:v.useCallback(()=>{p?P():window.clearTimeout(h.current)},[P,p]),onOpen:S,onClose:P,disableHoverableContent:p},t))},Vt="TooltipTrigger",Di=v.forwardRef((n,e)=>{const{__scopeTooltip:t,...r}=n,s=Ie(Vt,t),i=pt(Vt,t),o=ft(t),a=v.useRef(null),l=Ht(e,a,s.onTriggerChange),c=v.useRef(!1),u=v.useRef(!1),d=v.useCallback(()=>c.current=!1,[]);return v.useEffect(()=>()=>document.removeEventListener("pointerup",d),[d]),v.createElement(Vn,E({asChild:!0},o),v.createElement(fe.button,E({"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute},r,{ref:l,onPointerMove:q(n.onPointerMove,g=>{g.pointerType!=="touch"&&!u.current&&!i.isPointerInTransitRef.current&&(s.onTriggerEnter(),u.current=!0)}),onPointerLeave:q(n.onPointerLeave,()=>{s.onTriggerLeave(),u.current=!1}),onPointerDown:q(n.onPointerDown,()=>{c.current=!0,document.addEventListener("pointerup",d,{once:!0})}),onFocus:q(n.onFocus,()=>{c.current||s.onOpen()}),onBlur:q(n.onBlur,s.onClose),onClick:q(n.onClick,s.onClose)})))}),Li="TooltipPortal",[uo,Mi]=Ae(Li,{forceMount:void 0}),me="TooltipContent",Vi=v.forwardRef((n,e)=>{const t=Mi(me,n.__scopeTooltip),{forceMount:r=t.forceMount,side:s="top",...i}=n,o=Ie(me,n.__scopeTooltip);return v.createElement(Nn,{present:r||o.open},o.disableHoverableContent?v.createElement(kn,E({side:s},i,{ref:e})):v.createElement(Gi,E({side:s},i,{ref:e})))}),Gi=v.forwardRef((n,e)=>{const t=Ie(me,n.__scopeTooltip),r=pt(me,n.__scopeTooltip),s=v.useRef(null),i=Ht(e,s),[o,a]=v.useState(null),{trigger:l,onClose:c}=t,u=s.current,{onPointerInTransitChange:d}=r,g=v.useCallback(()=>{a(null),d(!1)},[d]),h=v.useCallback((p,f)=>{const m=p.currentTarget,w={x:p.clientX,y:p.clientY},R=Ui(w,m.getBoundingClientRect()),C=Hi(w,R),S=zi(f.getBoundingClientRect()),P=qi([...C,...S]);a(P),d(!0)},[d]);return v.useEffect(()=>()=>g(),[g]),v.useEffect(()=>{if(l&&u){const p=m=>h(m,u),f=m=>h(m,l);return l.addEventListener("pointerleave",p),u.addEventListener("pointerleave",f),()=>{l.removeEventListener("pointerleave",p),u.removeEventListener("pointerleave",f)}}},[l,u,h,g]),v.useEffect(()=>{if(o){const p=f=>{const m=f.target,w={x:f.clientX,y:f.clientY},R=l?.contains(m)||u?.contains(m),C=!Bi(w,o);R?g():C&&(g(),c())};return document.addEventListener("pointermove",p),()=>document.removeEventListener("pointermove",p)}},[l,u,o,c,g]),v.createElement(kn,E({},n,{ref:i}))}),[Ni,co]=Ae(mt,{isInside:!1}),kn=v.forwardRef((n,e)=>{const{__scopeTooltip:t,children:r,"aria-label":s,onEscapeKeyDown:i,onPointerDownOutside:o,...a}=n,l=Ie(me,t),c=ft(t),{onClose:u}=l;return v.useEffect(()=>(document.addEventListener(rt,u),()=>document.removeEventListener(rt,u)),[u]),v.useEffect(()=>{if(l.trigger){const d=g=>{const h=g.target;h!=null&&h.contains(l.trigger)&&u()};return window.addEventListener("scroll",d,{capture:!0}),()=>window.removeEventListener("scroll",d,{capture:!0})}},[l.trigger,u]),v.createElement(Dn,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:d=>d.preventDefault(),onDismiss:u},v.createElement(Ln,E({"data-state":l.stateAttribute},c,a,{ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"}}),v.createElement(Un,null,r),v.createElement(Ni,{scope:t,isInside:!0},v.createElement(Ei,{id:l.contentId,role:"tooltip"},s||r))))});function Ui(n,e){const t=Math.abs(e.top-n.y),r=Math.abs(e.bottom-n.y),s=Math.abs(e.right-n.x),i=Math.abs(e.left-n.x);switch(Math.min(t,r,s,i)){case i:return"left";case s:return"right";case t:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function Hi(n,e,t=5){const r=[];switch(e){case"top":r.push({x:n.x-t,y:n.y+t},{x:n.x+t,y:n.y+t});break;case"bottom":r.push({x:n.x-t,y:n.y-t},{x:n.x+t,y:n.y-t});break;case"left":r.push({x:n.x+t,y:n.y-t},{x:n.x+t,y:n.y+t});break;case"right":r.push({x:n.x-t,y:n.y-t},{x:n.x-t,y:n.y+t});break}return r}function zi(n){const{top:e,right:t,bottom:r,left:s}=n;return[{x:s,y:e},{x:t,y:e},{x:t,y:r},{x:s,y:r}]}function Bi(n,e){const{x:t,y:r}=n;let s=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const a=e[i].x,l=e[i].y,c=e[o].x,u=e[o].y;l>r!=u>r&&t<(c-a)*(r-l)/(u-l)+a&&(s=!s)}return s}function qi(n){const e=n.slice();return e.sort((t,r)=>t.x<r.x?-1:t.x>r.x?1:t.y<r.y?-1:t.y>r.y?1:0),Ji(e)}function Ji(n){if(n.length<=1)return n.slice();const e=[];for(let r=0;r<n.length;r++){const s=n[r];for(;e.length>=2;){const i=e[e.length-1],o=e[e.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))e.pop();else break}e.push(s)}e.pop();const t=[];for(let r=n.length-1;r>=0;r--){const s=n[r];for(;t.length>=2;){const i=t[t.length-1],o=t[t.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))t.pop();else break}t.push(s)}return t.pop(),e.length===1&&t.length===1&&e[0].x===t[0].x&&e[0].y===t[0].y?e:e.concat(t)}const Ki=Fi,Wi=ji,Xi=Di,Pn=Vi,Yi=Ki,Qi=Wi,Zi=Xi,En=v.forwardRef(({className:n,sideOffset:e=4,...t},r)=>_.jsx(Pn,{ref:r,sideOffset:e,className:F("z-50 overflow-hidden rounded-md bg-primary px-3 py-1.5 text-xs text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n),...t}));En.displayName=Pn.displayName;function eo(n){const e=(o,a)=>a===null?0:a,t=Object.keys(n.data[0]),r=[t.join(","),...n.data.map(o=>t.map(a=>JSON.stringify(o[a],e)).join(","))].join(`\r
`),s=new Blob([r],{type:"text/csv;charset=utf-8;"}),i=URL.createObjectURL(s);return _.jsx("a",{href:i,download:`${n.fileName}.csv`,children:_.jsx(re,{variant:"ghost",size:"icon",children:_.jsx(In,{})})})}function to({columns:n,data:e}){const[t,r]=v.useState([]),[s,i]=v.useState([]),o=vi({data:e,columns:n,getCoreRowModel:oi(),getPaginationRowModel:gi(),onSortingChange:r,getSortedRowModel:di(),onColumnFiltersChange:i,getFilteredRowModel:ci(),state:{sorting:t,columnFilters:s}});return _.jsxs("div",{children:[_.jsx("div",{className:"rounded-md border mt-12",children:_.jsxs(cn,{children:[_.jsx(dn,{children:o.getHeaderGroups().map(a=>_.jsx(Re,{children:a.headers.map(l=>_.jsx(gn,{children:l.isPlaceholder?null:Lt(l.column.columnDef.header,l.getContext())},l.id))},a.id))}),_.jsx(hn,{children:o.getRowModel().rows?.length?o.getRowModel().rows.map(a=>_.jsx(Re,{"data-state":a.getIsSelected()&&"selected",children:a.getVisibleCells().map(l=>_.jsx(tt,{children:Lt(l.column.columnDef.cell,l.getContext())},l.id))},a.id)):_.jsx(Re,{children:_.jsx(tt,{colSpan:n.length,className:"h-24 text-center",children:"No results."})})})]})}),_.jsxs("div",{className:"flex items-center justify-between",children:[_.jsx(Yi,{children:_.jsxs(Qi,{children:[_.jsx(Zi,{children:_.jsx(eo,{data:e,fileName:"space"})}),_.jsx(En,{children:_.jsx("p",{children:"Download .csv"})})]})}),_.jsxs("div",{className:"flex items-center justify-end space-x-2 pt-6 pb-4",children:[_.jsx(re,{variant:"ghost",size:"sm",onClick:()=>o.setPageIndex(0),disabled:!o.getCanPreviousPage(),children:"First"}),_.jsx(re,{variant:"outline",size:"sm",onClick:()=>o.previousPage(),disabled:!o.getCanPreviousPage(),children:"Previous"}),_.jsxs("p",{className:"flex w-[100px] items-center justify-center font-medium text-xs",children:["Page ",o.getState().pagination.pageIndex+1," of"," ",o.getPageCount()]}),_.jsx(re,{variant:"outline",size:"sm",onClick:()=>o.nextPage(),disabled:!o.getCanNextPage(),children:"Next"}),_.jsx(re,{variant:"ghost",size:"sm",onClick:()=>o.setPageIndex(o.getPageCount()-1),disabled:!o.getCanNextPage(),children:"Last"})]})]}),_.jsxs("div",{children:[_.jsx("h3",{className:"pb-1",children:"Filter"}),_.jsxs(Rn,{type:"multiple",size:"sm",className:"pb-2",children:[_.jsx(de,{value:"G","aria-label":"Toggle goalkeeper",className:"text-xs font-normal",onClick:()=>{o.getColumn("position")?.setFilterValue(()=>(o.getColumn("position")?.getFilterValue()??"").includes("G")?(o.getColumn("position")?.getFilterValue()??"").replace("G",""):(o.getColumn("position")?.getFilterValue()??"")+"G")},children:"Goalkeeper"}),_.jsx(de,{value:"D","aria-label":"Toggle defender",className:"text-xs font-normal",onClick:()=>{o.getColumn("position")?.setFilterValue(()=>(o.getColumn("position")?.getFilterValue()??"").includes("D")?(o.getColumn("position")?.getFilterValue()??"").replace("D",""):(o.getColumn("position")?.getFilterValue()??"")+"D")},children:"Defender"}),_.jsx(de,{value:"M","aria-label":"Toggle midfielder",className:"text-xs font-normal",onClick:()=>{o.getColumn("position")?.setFilterValue(()=>(o.getColumn("position")?.getFilterValue()??"").includes("M")?(o.getColumn("position")?.getFilterValue()??"").replace("M",""):(o.getColumn("position")?.getFilterValue()??"")+"M")},children:"Midfielder"}),_.jsx(de,{value:"F","aria-label":"Toggle forward",className:"text-xs font-normal",onClick:()=>{o.getColumn("position")?.setFilterValue(()=>(o.getColumn("position")?.getFilterValue()??"").includes("F")?(o.getColumn("position")?.getFilterValue()??"").replace("F",""):(o.getColumn("position")?.getFilterValue()??"")+"F")},children:"Forward"})]}),_.jsx(xn,{type:"number",placeholder:"Minimum games played",min:"1",name:"Minimum games played",onChange:a=>o.getColumn("games")?.setFilterValue(a.target.value),className:"w-auto text-xs mx-auto"})]})]})}const ho=n=>{const[e,t]=v.useState(null),[r,s]=v.useState(null);return v.useEffect(()=>{(async()=>{const{data:o,error:a}=await xs.from(n.table).select(n.columns);a&&(t("Could not fetch the data"),s(null),console.log(a)),o&&(s(o),t(null))})()},[]),_.jsxs("div",{children:[e&&_.jsx("p",{children:e}),r&&_.jsx("div",{className:"w-full mx-auto",children:_.jsx(to,{columns:_i,data:r})})]})};export{ho as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["_astro/browser.teEx77EO.js","_astro/index.gUi7oc_g.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}